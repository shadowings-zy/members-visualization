import{_ as E,h as S,c as l,o as n,j as e,t as r,e as f,n as P,F as T,B as H,N as G,p as x,b as U,a as B,q as et,P as st,v as J,ag as W,ai as tt,ak as nt,G as Z,g as lt,aj as it}from"./chunks/framework.Mlx6MwMA.js";const rt={class:"rank-badge"},ct={key:0,class:"medal"},dt={key:1,class:"rank-number"},ut={class:"avatar-section"},mt=["src","alt"],ht={key:1,class:"leaderboard-indicator"},gt={class:"member-info"},vt={class:"name-section"},pt={class:"member-name"},bt={class:"member-meta"},yt={key:0,class:"location"},_t={key:1,class:"company"},ft={key:0,class:"domains-section"},kt={class:"domains"},$t={class:"score-section"},wt={class:"score-value"},Dt={class:"score-label"},Ct={class:"detailed-stats"},xt={key:0,class:"stat-item"},St={class:"stat-value"},Mt={key:1,class:"stat-item"},Pt={class:"stat-value"},Tt={key:2,class:"stat-item"},Ht={class:"stat-value"},Nt={class:"actions-section"},Ot=["href","title"],Vt={__name:"LeaderboardItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},colorScheme:{type:String,default:"blue"},showTrend:{type:Boolean,default:!1},icon:{type:String,default:""},animationDelay:{type:Number,default:0}},setup(a){const h=a,p=S(()=>{const g=h.member.name;return g&&g!=="null"&&g!=="undefined"&&g!=="None"&&g.trim()!==""?g:h.member.id||"未知用户"}),d=g=>({1:"🥇",2:"🥈",3:"🥉"})[g]||g,k=g=>{const b="/members-visualization/",M=`${b}default-avatar.svg`.replace(/\/+/g,"/");return g?g.startsWith("avatars/")?`${b}${g}`.replace(/\/+/g,"/"):g.startsWith("http")?g:`${b}${g}`.replace(/\/+/g,"/"):M},w=g=>{const b="/members-visualization/";g.target.src=`${b}default-avatar.svg`.replace(/\/+/g,"/")},$=g=>g?g.split(";").map(b=>b.trim()).filter(b=>b):[],m=()=>{const g=["up","down","stable"];return g[Math.floor(Math.random()*g.length)]},D=()=>{const g=m();return{up:"📈",down:"📉",stable:"➡️"}[g]||"➡️"};return(g,b)=>(n(),l("div",{class:P(["leaderboard-item leaderboard-item-base",[`rank-${a.rank}`,`theme-${a.colorScheme}`]]),style:G({animationDelay:`${a.animationDelay}ms`})},[e("div",rt,[a.rank<=3?(n(),l("span",ct,r(d(a.rank)),1)):(n(),l("span",dt,r(a.rank),1))]),e("div",ut,[e("img",{src:k(a.member.avatar),alt:p.value,class:"avatar",onError:w},null,40,mt),a.showTrend?(n(),l("div",{key:0,class:P(["trend-indicator",m()])},r(D()),3)):a.icon?(n(),l("div",ht,r(a.icon),1)):f("",!0)]),e("div",gt,[e("div",vt,[e("h4",pt,r(p.value),1),e("div",bt,[a.member.location?(n(),l("span",yt,"📍 "+r(a.member.location),1)):f("",!0),a.member.company?(n(),l("span",_t,"🏢 "+r(a.member.company),1)):f("",!0)])]),a.member.domain?(n(),l("div",ft,[e("div",kt,[(n(!0),l(T,null,H($(a.member.domain),M=>(n(),l("span",{key:M,class:"domain-tag"},r(M),1))),128))])])):f("",!0)]),e("div",$t,[e("div",wt,r(Math.round(a.member.score||0)),1),e("div",Dt,r(a.member.scoreDisplay||"分数"),1),e("div",Ct,[a.member.followers?(n(),l("div",xt,[b[0]||(b[0]=e("span",{class:"stat-icon"},"👥",-1)),e("span",St,r(a.member.followers),1)])):f("",!0),a.member.total_stars?(n(),l("div",Mt,[b[1]||(b[1]=e("span",{class:"stat-icon"},"⭐",-1)),e("span",Pt,r(a.member.total_stars),1)])):f("",!0),a.member.public_repos?(n(),l("div",Tt,[b[2]||(b[2]=e("span",{class:"stat-icon"},"📁",-1)),e("span",Ht,r(a.member.public_repos),1)])):f("",!0)])]),e("div",Nt,[e("a",{href:a.member.github,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:`访问 ${p.value} 的 GitHub`},[...b[3]||(b[3]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,Ot)])],6))}},qt=E(Vt,[["__scopeId","data-v-d5ba7fab"]]),zt={class:"card-header card-header-base"},Rt={class:"title-section title-section-base"},Bt={class:"icon icon-base"},At={class:"title title-base"},Et={class:"description description-base"},jt={class:"stats-badge"},Lt={class:"count"},Gt={class:"leaderboard-content"},Ut={key:0,class:"empty-state"},Ft={key:1,class:"members-list"},Wt={class:"card-footer"},Zt={class:"ranking-info"},Jt={key:0},Yt={key:1},Qt={__name:"LeaderboardCard",props:{title:{type:String,required:!0},description:{type:String,required:!0},icon:{type:String,default:"🏆"},members:{type:Array,default:()=>[]},colorScheme:{type:String,default:"blue",validator:a=>["fire","blue","green","purple","gold"].includes(a)},showTrend:{type:Boolean,default:!1}},setup(a){const h=a,p=x(!1),d=S(()=>p.value?h.members:h.members.slice(0,5)),k=()=>{p.value=!p.value};return(w,$)=>{var m,D,g;return n(),l("div",{class:P(["leaderboard-card leaderboard-card-base",`theme-${a.colorScheme}`])},[e("div",zt,[e("div",Rt,[e("span",Bt,r(a.icon),1),e("div",null,[e("h3",At,r(a.title),1),e("p",Et,r(a.description),1)])]),e("div",jt,[e("span",Lt,r(a.members.length),1),$[0]||($[0]=e("span",{class:"label"},"人上榜",-1))])]),e("div",Gt,[a.members.length===0?(n(),l("div",Ut,[...$[1]||($[1]=[e("p",null,"暂无符合条件的成员",-1)])])):(n(),l("div",Ft,[(n(!0),l(T,null,H(d.value,(b,M)=>(n(),U(qt,{key:b.id,member:b,rank:b.rank,"color-scheme":a.colorScheme,"show-trend":a.showTrend,icon:a.icon,"animation-delay":M*100},null,8,["member","rank","color-scheme","show-trend","icon","animation-delay"]))),128))]))]),e("div",Wt,[e("div",Zt,[a.members.length>0?(n(),l("span",Jt," 冠军："+r(((m=a.members[0])==null?void 0:m.name)||((D=a.members[0])==null?void 0:D.id)),1)):f("",!0),a.members.length>1?(n(),l("span",Yt," 最高分："+r(Math.round(((g=a.members[0])==null?void 0:g.score)||0)),1)):f("",!0)]),a.members.length>5?(n(),l("button",{key:0,onClick:k,class:"expand-btn"},[B(r(p.value?"收起":"查看更多")+" ",1),e("span",{class:P(["arrow",{expanded:p.value}])},"▼",2)])):f("",!0)])],2)}}},Xt=E(Qt,[["__scopeId","data-v-b874b566"]]),Kt={class:"rank-badge"},It={key:0,class:"medal"},te={key:1,class:"rank-number"},ee={class:"avatar-section"},se=["src","alt"],ae={class:"member-info"},oe={class:"name-section"},ne={class:"member-name"},le={class:"member-meta"},ie={key:0,class:"location"},re={key:1,class:"company"},ce={key:0,class:"domains-section"},de={class:"domains"},ue={class:"daily-chart-section"},me={class:"daily-chart"},he=["title"],ge={key:0,class:"bar-fill"},ve={class:"score-section"},pe={class:"score-value"},be={class:"score-label"},ye={class:"detailed-stats"},_e={key:0,class:"stat-item"},fe={class:"stat-value"},ke={key:1,class:"stat-item"},$e={class:"stat-value"},we={key:2,class:"stat-item"},De={class:"stat-value"},Ce={class:"popup-header"},xe={class:"popup-content"},Se={class:"top-sections"},Me={class:"detail-section stats-section"},Pe={key:0,class:"detail-section repos-section"},Te={class:"repo-tags"},He=["href","title"],Ne={key:0,class:"detail-section"},Oe={class:"commit-messages"},Ve=["href","title"],qe={class:"commit-text"},ze={class:"commit-meta"},Re={class:"repo-link"},Be={class:"actions-section"},Ae=["href"],Ee={__name:"WeeklyCommitItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},animationDelay:{type:Number,default:0},showDetails:{type:Boolean,default:!1}},emits:["toggle-details"],setup(a,{emit:h}){const p=s=>s?s.split(";").map(t=>t.trim()).filter(Boolean):[],d=a,k=s=>{s.target.closest&&(s.target.closest(".github-link")||s.target.closest(".details-popup"))||w("toggle-details",d.member.user_key)},w=h,$=x(null),m=x(null),D=x("bottom"),g=async()=>{if(!d.showDetails||(await st(),!m.value))return;const s=m.value.closest(".leaderboard-content")||m.value.closest(".commits-list")||m.value.closest(".weekly-commits-card");if(!s){D.value="bottom";return}const t=s.querySelectorAll(".weekly-commit-item"),o=Array.from(t).indexOf(m.value),u=t.length;if(o>=u-2){D.value="top";return}const C=m.value.getBoundingClientRect(),y=s.getBoundingClientRect(),A=320,O=20,j=y.bottom-C.bottom,L=C.top-y.top;j<A+O&&L>A+O?D.value="top":D.value="bottom"};et(()=>d.showDetails,s=>{s&&g()});const b=S(()=>{const s=d.member.name;return s&&s!=="null"&&s!=="undefined"&&s!=="None"&&s.trim()!==""?s:d.member.id?d.member.id:d.member.display_name||d.member.user_key||"未知用户"}),M=s=>{const t=s.getFullYear(),o=String(s.getMonth()+1).padStart(2,"0"),u=String(s.getDate()).padStart(2,"0");return`${t}-${o}-${u}`},q=S(()=>{const s=d.member.daily_commits?Object.keys(d.member.daily_commits):[];let t=new Date;if(s.length){const u=s.map(C=>new Date(C)).filter(C=>!isNaN(C));u.length&&(t=u.sort((C,y)=>C-y)[u.length-1])}const o=[];for(let u=6;u>=0;u--){const C=new Date(t);C.setDate(C.getDate()-u),o.push(M(C))}return o}),V=S(()=>{const s=d.member.daily_commits||{};return q.value.map(t=>{const o=Object.prototype.hasOwnProperty.call(s,t),u=o&&s[t]||0;return{date:t,count:u,hasData:o}})}),z=S(()=>{const s=[],t=d.member.total_commits,o=d.member.repo_count,u=d.member.active_days;return typeof t=="number"&&s.push(`${t} 次`),typeof o=="number"&&s.push(`${o} 仓库`),typeof u=="number"&&s.push(`${u} 天`),s.join(" • ")}),N=s=>({1:"🥇",2:"🥈",3:"🥉"})[s]||s,R=s=>{const t="/members-visualization/",o=`${t}default-avatar.svg`.replace(/\/+/g,"/");return s?s.startsWith("avatars/")?`${t}${s}`.replace(/\/+/g,"/"):s.startsWith("http")?s:`${t}${s}`.replace(/\/+/g,"/"):o},c=s=>{const t="/members-visualization/";s.target.src=`${t}default-avatar.svg`.replace(/\/+/g,"/")},i=s=>{const t=V.value.filter(u=>u.hasData).map(u=>u.count),o=t.length?Math.max(...t):0;return o>0?s/o*100:0},v=()=>{const s=d.member.avg_commits_per_day||0,t=d.member.active_days||0;return s>=3&&t>=5?"up":s>=2&&t>=3?"stable":"down"},_=()=>{const s=v();return{up:"📈",stable:"➡️",down:"📉"}[s]||"➡️"};return(s,t)=>{var o,u,C;return n(),l("div",{ref_key:"itemRef",ref:m,class:P(["weekly-commit-item leaderboard-item-base",[`rank-${a.rank}`,{"is-expanded":d.showDetails}]]),style:G({animationDelay:`${a.animationDelay}ms`}),onClick:k},[e("div",Kt,[a.rank<=3?(n(),l("span",It,r(N(a.rank)),1)):(n(),l("span",te,r(a.rank),1))]),e("div",ee,[e("img",{src:R(a.member.avatar),alt:b.value,class:"avatar",onError:c},null,40,se),t[1]||(t[1]=e("div",{class:"fire-indicator"},"🔥",-1))]),e("div",ae,[e("div",oe,[e("h4",ne,r(b.value),1),e("div",le,[a.member.location?(n(),l("span",ie,"📍 "+r(a.member.location),1)):f("",!0),a.member.company?(n(),l("span",re,"🏢 "+r(a.member.company),1)):f("",!0)])]),a.member.domain?(n(),l("div",ce,[e("div",de,[(n(!0),l(T,null,H(p(a.member.domain),y=>(n(),l("span",{key:y,class:"domain-tag"},r(y),1))),128))])])):f("",!0)]),e("div",ue,[t[2]||(t[2]=e("div",{class:"chart-title"},"每日分布",-1)),e("div",me,[(n(!0),l(T,null,H(V.value,y=>(n(),l("div",{key:y.date,class:P(y.hasData?"day-bar":"day-dash"),style:G(y.hasData?{height:`${i(y.count)}%`}:{}),title:y.hasData?`${y.date}: ${y.count} commits`:`${y.date}: 无数据`},[y.hasData?(n(),l("div",ge)):f("",!0)],14,he))),128))])]),e("div",ve,[e("div",pe,r(a.member.score),1),e("div",be,r(z.value),1),e("div",ye,[a.member.followers?(n(),l("div",_e,[t[3]||(t[3]=e("span",{class:"stat-icon"},"👥",-1)),e("span",fe,r(a.member.followers),1)])):f("",!0),a.member.total_stars?(n(),l("div",ke,[t[4]||(t[4]=e("span",{class:"stat-icon"},"⭐",-1)),e("span",$e,r(a.member.total_stars),1)])):f("",!0),a.member.public_repos?(n(),l("div",we,[t[5]||(t[5]=e("span",{class:"stat-icon"},"📁",-1)),e("span",De,r(a.member.public_repos),1)])):f("",!0)]),e("div",{class:P(["trend-indicator",v()])},r(_()),3)]),d.showDetails?(n(),l("div",{key:0,ref_key:"popupRef",ref:$,class:P(["details-popup",`popup-${D.value}`])},[e("div",Ce,[e("h5",null,r(b.value)+" 的本周战绩",1),e("button",{onClick:t[0]||(t[0]=y=>w("toggle-details",d.member.user_key)),class:"close-btn"},"×")]),e("div",xe,[e("div",Se,[e("div",Me,[t[6]||(t[6]=e("h6",null,"📊 统计概览",-1)),e("ul",null,[e("li",null,"总commit数："+r(a.member.total_commits),1),e("li",null,"参与仓库："+r(a.member.repo_count)+" 个",1),e("li",null,"活跃天数："+r(a.member.active_days)+" 天",1),e("li",null,"平均每日："+r((o=a.member.avg_commits_per_day)==null?void 0:o.toFixed(1))+" commits",1)])]),(u=a.member.repos)!=null&&u.length?(n(),l("div",Pe,[t[8]||(t[8]=e("h6",null,"📁 主要仓库",-1)),e("div",Te,[(n(!0),l(T,null,H(a.member.repos.slice(0,5),y=>(n(),l("a",{key:y,href:`https://github.com/datawhalechina/${y}`,target:"_blank",rel:"noopener noreferrer",class:"repo-tag repo-link-tag",title:`访问仓库: ${y}`},[B(r(y)+" ",1),t[7]||(t[7]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"10",height:"10"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))],8,He))),128))])])):f("",!0)]),(C=a.member.commit_messages)!=null&&C.length?(n(),l("div",Ne,[t[10]||(t[10]=e("h6",null,"💬 最近提交",-1)),e("div",Oe,[(n(!0),l(T,null,H(a.member.commit_messages.slice(0,3),y=>(n(),l("div",{key:y.url,class:"commit-message"},[e("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",class:"commit-link",title:`查看提交详情: ${y.message}`},[e("div",qe,r(y.message),1),e("div",ze,[e("span",Re,r(y.repo),1),B(" • "+r(y.date)+" ",1),t[9]||(t[9]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"12",height:"12"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))])],8,Ve)]))),128))])])):f("",!0)])],2)):f("",!0),e("div",Be,[a.member.github_username?(n(),l("a",{key:0,href:`https://github.com/${a.member.github_username}`,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:"访问GitHub"},[...t[11]||(t[11]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,Ae)):f("",!0)]),t[12]||(t[12]=e("div",{class:"click-overlay","aria-hidden":"true"},null,-1))],6)}}},je=E(Ee,[["__scopeId","data-v-54b50abe"]]);function Le(a){const h=a.trim().split(`
`);if(h.length<2)return[];const p=h[0].split(",").map(k=>k.trim()),d=[];for(let k=1;k<h.length;k++){const w=h[k].trim();if(!w)continue;const $=w.split(",").map(D=>D.trim()),m={};p.forEach((D,g)=>{m[D]=$[g]||""}),d.push(m)}return d}function Ge(a){const h=new Set;return a.forEach(p=>{p.id&&p.id.trim()&&h.add(p.id.trim())}),h}async function Ue(a="/data/datawhale_member.csv"){try{console.log(`Loading organization members from: ${a}`);const h=await fetch(a);if(!h.ok)throw new Error(`Failed to fetch CSV: ${h.status}`);const p=await h.text(),d=Le(p),k=Ge(d);return console.log(`Loaded ${k.size} organization members from CSV`),k}catch(h){return console.error("Error loading organization members:",h),new Set}}function Y(a,h){return!a||!h?!1:h.has(a)}const Fe={class:"card-header card-header-base"},We={class:"stats-badge"},Ze={class:"count"},Je={class:"update-info-section"},Ye={class:"time-info"},Qe={class:"update-time"},Xe={class:"leaderboard-content"},Ke={key:0,class:"loading-state"},Ie={key:1,class:"error-state"},ts={key:2,class:"empty-state"},es={key:0},ss={key:1},as={key:2,class:"empty-hint"},os={key:3,class:"empty-hint"},ns={key:3,class:"commits-list"},ls={key:0,class:"card-footer"},is={class:"ranking-info"},rs={__name:"WeeklyCommitsCard",props:{membersData:{type:Array,default:()=>[]},selectedDomain:{type:String,default:""},topCount:{type:Number,default:20},showOnlyOrgMembers:{type:Boolean,default:!1},organizationMembers:{type:Set,default:()=>new Set}},setup(a){const h=a,p=x(!0),d=x(null),k=x(null),w=x(!1),$=x(null),m=S(()=>{var v;if(!((v=k.value)!=null&&v.user_commits))return[];const c=[];for(const[_,s]of Object.entries(k.value.user_commits))if(s.total_commits>=1){const t=h.membersData.find(u=>u.id===_);if(h.showOnlyOrgMembers&&(!t||!Y(_,h.organizationMembers)))continue;const o={user_key:_,id:(t==null?void 0:t.id)||_,name:(t==null?void 0:t.name)||null,display_name:M(_,t),github_username:q(_),avatar:(t==null?void 0:t.avatar)||null,location:(t==null?void 0:t.location)||null,company:(t==null?void 0:t.company)||null,domain:(t==null?void 0:t.domain)||"",followers:(t==null?void 0:t.followers)??(t==null?void 0:t.followers_count)??0,total_stars:(t==null?void 0:t.total_stars)??(t==null?void 0:t.stars)??0,public_repos:(t==null?void 0:t.public_repos)??(t==null?void 0:t.repo_count)??0,...s,score:V(s)};h.selectedDomain?t&&t.domain&&t.domain.includes(h.selectedDomain)&&c.push(o):c.push(o)}return c.sort((_,s)=>s.score-_.score).slice(0,h.topCount)}),D=S(()=>w.value?m.value:m.value.slice(0,5)),g=S(()=>m.value.reduce((c,i)=>c+i.total_commits,0)),b=S(()=>{var i;return(i=k.value)!=null&&i.update_time?new Date(k.value.update_time).toLocaleString("zh-CN"):"未知"}),M=(c,i)=>{if(i!=null&&i.name&&i.name!=="null"&&i.name!=="undefined"&&i.name!=="None"&&i.name.trim()!=="")return i.name;if(i!=null&&i.id)return i.id;if(!c.includes("@"))return c;const v=c.match(/^([^@]+)@/);return v?v[1]:c},q=c=>c.includes("@")?null:c,V=c=>{let i=0;i+=c.total_commits;const v=c.active_days||0;v>=7?i+=10:v>=5?i+=5:v>=3&&(i+=2);const _=c.repo_count||0;_>=5?i+=5:_>=3?i+=3:_>=2&&(i+=1);const s=c.avg_commits_per_day||0;return s>=5?i+=8:s>=3?i+=5:s>=2&&(i+=2),Math.round(i)},z=c=>{$.value===c?$.value=null:$.value=c},N=async()=>{try{p.value=!0,d.value=null;const i="/members-visualization/data/commits_weekly.json".replace(/\/+/g,"/"),v=await fetch(i);if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);k.value=await v.json()}catch(c){d.value=c.message,console.error("加载commit数据失败:",c)}finally{p.value=!1}},R=()=>{w.value=!w.value};return J(()=>{N()}),(c,i)=>{var v;return n(),l("div",{class:P(["weekly-commits-card leaderboard-card-base","theme-fire"])},[e("div",Fe,[i[1]||(i[1]=e("div",{class:"title-section title-section-base"},[e("span",{class:"icon icon-base animated-fire"},"🔥"),e("div",null,[e("h3",{class:"title title-base"},"一周卷王榜"),e("p",{class:"description description-base"},"基于最近7天commit活动的超级卷王排行")])],-1)),e("div",We,[e("span",Ze,r(m.value.length),1),i[0]||(i[0]=e("span",{class:"label"},"大卷王",-1))])]),e("div",Je,[e("div",Ye,[i[2]||(i[2]=e("span",{class:"time-label"},"📅 最近7天活跃数据",-1)),e("span",Qe,r(b.value),1)])]),e("div",Xe,[p.value?(n(),l("div",Ke,[...i[3]||(i[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"正在加载commit数据...",-1)])])):d.value?(n(),l("div",Ie,[e("p",null,"❌ "+r(d.value),1),e("button",{onClick:N,class:"retry-btn"},"重试")])):m.value.length===0?(n(),l("div",ts,[i[4]||(i[4]=e("div",{class:"empty-icon"},"😴",-1)),a.showOnlyOrgMembers?(n(),l("p",es,"组织成员本周暂无commit活动")):(n(),l("p",ss,"本周暂无commit活动")),a.showOnlyOrgMembers?(n(),l("p",as,"组织成员们快去写代码吧！")):(n(),l("p",os,"快去写代码吧！"))])):(n(),l("div",ns,[(n(!0),l(T,null,H(D.value,(_,s)=>(n(),U(je,{key:_.user_key,member:_,rank:s+1,"animation-delay":s*100,"show-details":$.value===_.user_key,onToggleDetails:z},null,8,["member","rank","animation-delay","show-details"]))),128))]))]),m.value.length>0?(n(),l("div",ls,[e("div",is,[e("span",null,"🏆 本周卷王："+r((v=m.value[0])==null?void 0:v.display_name),1),e("span",null,"📊 总commit数："+r(g.value),1)]),m.value.length>5?(n(),l("button",{key:0,onClick:R,class:"expand-btn"},[B(r(w.value?"收起":"查看更多")+" ",1),e("span",{class:P(["arrow",{expanded:w.value}])},"▼",2)])):f("",!0)])):f("",!0)])}}},cs=E(rs,[["__scopeId","data-v-bd5c0ad2"]]),ds={class:"rank-badge"},us={key:0,class:"medal"},ms={key:1,class:"rank-number"},hs={class:"avatar-section"},gs=["src","alt"],vs={class:"member-info"},ps={class:"name-section"},bs={class:"member-name"},ys={class:"member-meta"},_s={key:0,class:"location"},fs={key:1,class:"company"},ks={key:0,class:"domains-section"},$s={class:"domains"},ws={class:"night-chart-section"},Ds={class:"night-chart"},Cs=["title"],xs={class:"score-section"},Ss={class:"score-value night-score"},Ms={class:"score-label"},Ps={class:"detailed-stats"},Ts={key:0,class:"stat-item"},Hs={class:"stat-value"},Ns={key:1,class:"stat-item"},Os={class:"stat-value"},Vs={key:2,class:"stat-item"},qs={class:"stat-value"},zs={class:"actions-section"},Rs=["href"],Bs={class:"popup-header"},As={class:"popup-content"},Es={class:"top-sections"},js={class:"detail-section stats-section"},Ls={class:"detail-section analysis-section"},Gs={class:"night-hours-detail"},Us={class:"hour-label"},Fs={class:"hour-count"},Ws={key:0,class:"detail-section"},Zs={class:"commit-messages"},Js=["href","title"],Ys={class:"commit-text"},Qs={class:"commit-meta"},Xs={class:"repo-link"},Ks={class:"night-time"},Is={__name:"NightOwlItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},animationDelay:{type:Number,default:0},showDetails:{type:Boolean,default:!1}},emits:["toggle-details"],setup(a,{emit:h}){const p=s=>s?s.split(";").map(t=>t.trim()).filter(Boolean):[],d=a,k=h,w=s=>{s.target.closest&&(s.target.closest(".github-link")||s.target.closest(".details-popup"))||k("toggle-details",d.member.user_key)},$=x(null),m=x(null),D=x("bottom"),g=[22,23,0,1,2,3,4,5],b=S(()=>{const s=d.member.name;return s&&s!=="null"&&s!=="undefined"&&s!=="None"&&s.trim()!==""?s:d.member.id?d.member.id:d.member.display_name||d.member.user_key||"未知用户"}),M=S(()=>(d.member.commit_messages||[]).filter(s=>s.is_night_owl)),q=S(()=>{const s=[],t=d.member.night_owl_commits,o=d.member.night_owl_percentage;return typeof t=="number"&&s.push(`${t} 深夜`),typeof o=="number"&&s.push(`${o}%`),s.join(" • ")}),V=s=>({1:"🥇",2:"🥈",3:"🥉"})[s]||s,z=s=>{if(!s)return"/default-avatar.png";const t="/members-visualization/";return s.startsWith("http")?s:`${t}${s}`.replace(/\/+/g,"/")},N=s=>{s.target.src="/default-avatar.png"},R=s=>{const t=d.member.beijing_hourly_distribution[s]||0,o=Math.max(...g.map(u=>d.member.beijing_hourly_distribution[u]||0));return o>0?t/o*100:0},c=()=>{const s=d.member.night_owl_percentage||0;return s>=50?"trend-hot":s>=30?"trend-warm":"trend-cool"},i=()=>{const s=d.member.night_owl_percentage||0;return s>=50?"↗":s>=30?"→":"↘"},v=s=>`${s.toString().padStart(2,"0")}:00`,_=async()=>{if(!(!d.showDetails||!m.value)){await st();try{const s=m.value.closest(".commits-list");if(!s){D.value="bottom";return}const t=s.querySelectorAll(".night-owl-item"),o=Array.from(t).indexOf(m.value),u=t.length;if(o>=u-2){D.value="top";return}const C=m.value.getBoundingClientRect(),y=s.getBoundingClientRect(),A=320,O=20,j=y.bottom-C.bottom,L=C.top-y.top;j<A+O&&L>A+O?D.value="top":D.value="bottom"}catch(s){console.warn("弹窗定位计算失败:",s),D.value="bottom"}}};return et(()=>d.showDetails,s=>{s&&_()},{immediate:!0}),(s,t)=>(n(),l("div",{ref_key:"itemRef",ref:m,class:P(["night-owl-item leaderboard-item-base",[`rank-${a.rank}`,{"is-expanded":d.showDetails}]]),style:G({animationDelay:`${a.animationDelay}ms`}),onClick:w},[e("div",ds,[a.rank<=3?(n(),l("span",us,r(V(a.rank)),1)):(n(),l("span",ms,r(a.rank),1))]),e("div",hs,[e("img",{src:z(a.member.avatar),alt:b.value,class:"avatar",onError:N},null,40,gs),t[1]||(t[1]=e("div",{class:"moon-indicator"},"🌙",-1))]),e("div",vs,[e("div",ps,[e("h4",bs,r(b.value),1),e("div",ys,[a.member.location?(n(),l("span",_s,"📍 "+r(a.member.location),1)):f("",!0),a.member.company?(n(),l("span",fs,"🏢 "+r(a.member.company),1)):f("",!0)])]),a.member.domain?(n(),l("div",ks,[e("div",$s,[(n(!0),l(T,null,H(p(a.member.domain),o=>(n(),l("span",{key:o,class:"domain-tag"},r(o),1))),128))])])):f("",!0)]),e("div",ws,[t[3]||(t[3]=e("div",{class:"chart-title"},"深夜分布",-1)),e("div",Ds,[(n(),l(T,null,H(g,o=>e("div",{key:o,class:"hour-bar",style:G({height:`${R(o)}%`}),title:`${o}:00 - ${a.member.beijing_hourly_distribution[o]||0} commits`},[...t[2]||(t[2]=[e("div",{class:"bar-fill night-bar-fill"},null,-1)])],12,Cs)),64))])]),e("div",xs,[e("div",Ss,r(a.member.night_owl_score),1),e("div",Ms,r(q.value),1),e("div",Ps,[a.member.followers?(n(),l("div",Ts,[t[4]||(t[4]=e("span",{class:"stat-icon"},"👥",-1)),e("span",Hs,r(a.member.followers),1)])):f("",!0),a.member.total_stars?(n(),l("div",Ns,[t[5]||(t[5]=e("span",{class:"stat-icon"},"⭐",-1)),e("span",Os,r(a.member.total_stars),1)])):f("",!0),a.member.public_repos?(n(),l("div",Vs,[t[6]||(t[6]=e("span",{class:"stat-icon"},"📁",-1)),e("span",qs,r(a.member.public_repos),1)])):f("",!0)]),e("div",{class:P(["trend-indicator night-trend",c()])},r(i()),3)]),e("div",zs,[a.member.github_username?(n(),l("a",{key:0,href:`https://github.com/${a.member.github_username}`,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:"访问GitHub"},[...t[7]||(t[7]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.30.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,Rs)):f("",!0)]),d.showDetails?(n(),l("div",{key:0,ref_key:"popupRef",ref:$,class:P(["details-popup night-popup",`popup-${D.value}`])},[e("div",Bs,[e("h5",null,r(b.value)+" 的深夜战绩",1),e("button",{onClick:t[0]||(t[0]=o=>k("toggle-details",d.member.user_key)),class:"close-btn"},"×")]),e("div",As,[e("div",Es,[e("div",js,[t[8]||(t[8]=e("h6",null,"🌙 深夜统计",-1)),e("ul",null,[e("li",null,"深夜commit："+r(a.member.night_owl_commits)+" 个",1),e("li",null,"深夜比例："+r(a.member.night_owl_percentage)+"%",1),e("li",null,"夜猫分数："+r(a.member.night_owl_score)+" 分",1),e("li",null,"活跃天数："+r(a.member.active_days)+" 天",1)])]),e("div",Ls,[t[9]||(t[9]=e("h6",null,"📊 时段分析",-1)),e("div",Gs,[(n(),l(T,null,H(g,o=>e("div",{key:o,class:"hour-detail"},[e("span",Us,r(o)+":00",1),e("span",Fs,r(a.member.beijing_hourly_distribution[o]||0),1)])),64))])])]),M.value.length?(n(),l("div",Ws,[t[12]||(t[12]=e("h6",null,"🌃 深夜提交记录",-1)),e("div",Zs,[(n(!0),l(T,null,H(M.value.slice(0,3),o=>(n(),l("div",{key:o.url,class:"commit-message night-commit"},[e("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",class:"commit-link",title:`查看提交详情: ${o.message}`},[e("div",Ys,r(o.message),1),e("div",Qs,[e("span",Xs,r(o.repo),1),t[10]||(t[10]=B(" • ",-1)),e("span",Ks,r(v(o.beijing_hour)),1),B(" • "+r(o.date)+" ",1),t[11]||(t[11]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"12",height:"12"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))])],8,Js)]))),128))])])):f("",!0)])],2)):f("",!0),t[13]||(t[13]=e("div",{class:"click-overlay","aria-hidden":"true"},null,-1))],6))}},ta=E(Is,[["__scopeId","data-v-8daf1217"]]),ea={class:"card-header card-header-base"},sa={class:"stats-badge"},aa={class:"count"},oa={class:"update-info-section"},na={class:"time-info"},la={class:"update-time"},ia={class:"leaderboard-content"},ra={key:0,class:"loading-state"},ca={key:1,class:"error-state"},da={key:2,class:"empty-state"},ua={key:0},ma={key:1},ha={key:2,class:"empty-hint"},ga={key:3,class:"empty-hint"},va={key:3,class:"commits-list"},pa={key:0,class:"card-footer"},ba={class:"ranking-info"},ya={__name:"NightOwlCard",props:{membersData:{type:Array,default:()=>[]},selectedDomain:{type:String,default:""},topCount:{type:Number,default:20},showOnlyOrgMembers:{type:Boolean,default:!1},organizationMembers:{type:Set,default:()=>new Set}},setup(a){const h=a,p=x(!1),d=x(null),k=x(null),w=x(null),$=x(!1),m=S(()=>{var i;if(!((i=k.value)!=null&&i.user_commits))return[];const c=[];for(const[v,_]of Object.entries(k.value.user_commits))if(_.night_owl_commits>=1){const s=h.membersData.find(o=>o.id===v);if(h.showOnlyOrgMembers&&(!s||!Y(v,h.organizationMembers)))continue;const t={user_key:v,id:(s==null?void 0:s.id)||v,name:(s==null?void 0:s.name)||null,display_name:M(v,s),github_username:q(v),avatar:(s==null?void 0:s.avatar)||null,location:(s==null?void 0:s.location)||null,company:(s==null?void 0:s.company)||null,domain:(s==null?void 0:s.domain)||"",followers:(s==null?void 0:s.followers)??(s==null?void 0:s.followers_count)??0,total_stars:(s==null?void 0:s.total_stars)??(s==null?void 0:s.stars)??0,public_repos:(s==null?void 0:s.public_repos)??(s==null?void 0:s.repo_count)??0,..._,night_owl_score:V(_)};h.selectedDomain?s&&s.domain&&s.domain.includes(h.selectedDomain)&&c.push(t):c.push(t)}return c.sort((v,_)=>_.night_owl_score-v.night_owl_score)}),D=S(()=>{const c=$.value?h.topCount:Math.min(5,h.topCount);return m.value.slice(0,c)}),g=S(()=>m.value.reduce((c,i)=>c+i.night_owl_commits,0)),b=S(()=>{var c;if(!((c=k.value)!=null&&c.update_time))return"未知";try{return new Date(k.value.update_time).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return"未知"}}),M=(c,i)=>i!=null&&i.name&&i.name!=="null"&&i.name!=="undefined"&&i.name!=="None"&&i.name.trim()!==""?i.name:i!=null&&i.id?i.id:c.includes("@")?c.split("@")[0]:c,q=c=>c.includes("@")?c.split("@")[0]:c,V=c=>{let i=0;i+=c.night_owl_commits*2;const v=c.night_owl_percentage||0;v>=50?i+=10:v>=30?i+=5:v>=20&&(i+=2);const _=c.active_days||0;_>=5?i+=8:_>=3&&(i+=4);const s=c.repo_count||0;return s>=3?i+=3:s>=2&&(i+=1),Math.round(i)},z=c=>{w.value===c?w.value=null:w.value=c},N=async()=>{try{p.value=!0,d.value=null;const i="/members-visualization/data/commits_weekly.json".replace(/\/+/g,"/"),v=await fetch(i);if(!v.ok)throw new Error(`HTTP error! status: ${v.status}`);k.value=await v.json()}catch(c){d.value=c.message,console.error("加载commit数据失败:",c)}finally{p.value=!1}},R=()=>{$.value=!$.value};return J(()=>{N()}),(c,i)=>{var v;return n(),l("div",{class:P(["night-owl-card leaderboard-card-base","theme-night"])},[e("div",ea,[i[1]||(i[1]=e("div",{class:"title-section title-section-base"},[e("span",{class:"icon icon-base animated-moon"},"🌙"),e("div",null,[e("h3",{class:"title title-base"},"夜猫榜"),e("p",{class:"description description-base"},"深夜时段（22:00-06:00）代码提交活跃度排行")])],-1)),e("div",sa,[e("span",aa,r(m.value.length),1),i[0]||(i[0]=e("span",{class:"label"},"夜猫子",-1))])]),e("div",oa,[e("div",na,[i[2]||(i[2]=e("span",{class:"time-label"},"🌃 最近7天深夜活动数据",-1)),e("span",la,r(b.value),1)])]),e("div",ia,[p.value?(n(),l("div",ra,[...i[3]||(i[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"正在加载夜猫数据...",-1)])])):d.value?(n(),l("div",ca,[e("p",null,"❌ "+r(d.value),1),e("button",{onClick:N,class:"retry-btn"},"重试")])):m.value.length===0?(n(),l("div",da,[i[4]||(i[4]=e("div",{class:"empty-icon"},"😴",-1)),a.showOnlyOrgMembers?(n(),l("p",ua,"组织成员本周暂无深夜提交活动")):(n(),l("p",ma,"本周暂无深夜提交活动")),a.showOnlyOrgMembers?(n(),l("p",ha,"组织成员们早睡早起身体好！")):(n(),l("p",ga,"早睡早起身体好！"))])):(n(),l("div",va,[(n(!0),l(T,null,H(D.value,(_,s)=>(n(),U(ta,{key:_.user_key,member:_,rank:s+1,"animation-delay":s*100,"show-details":w.value===_.user_key,onToggleDetails:z},null,8,["member","rank","animation-delay","show-details"]))),128))]))]),m.value.length>0?(n(),l("div",pa,[e("div",ba,[e("span",null,"夜猫王："+r((v=m.value[0])==null?void 0:v.display_name),1),e("span",null,"总深夜commit数："+r(g.value),1)]),m.value.length>5?(n(),l("button",{key:0,onClick:R,class:"expand-btn"},[B(r($.value?"收起":"查看更多")+" ",1),e("span",{class:P(["arrow",{expanded:$.value}])},"▼",2)])):f("",!0)])):f("",!0)])}}},_a=E(ya,[["__scopeId","data-v-aafaa0f1"]]),fa={class:"rankings-container"},ka={key:0,class:"loading-state"},$a={key:1,class:"error-state"},wa={key:2,class:"rankings-content"},Da={class:"filters-section"},Ca={class:"filter-group"},xa=["value"],Sa={class:"filter-group"},Ma={class:"filter-group checkbox-group"},Pa={class:"checkbox-label"},Ta={class:"weekly-commits-section"},Ha={class:"night-owl-section"},Na={class:"leaderboards-grid"},Oa={class:"update-info"},Va={__name:"Rankings",setup(a){const h=x(!0),p=x(null),d=x([]),k=x(null),w=x(""),$=x(20),m=x(!1),D=x(new Set),g=S(()=>{const t=new Set;return d.value.forEach(o=>{o.domain&&o.domain.split(";").forEach(u=>t.add(u.trim()))}),Array.from(t).sort()}),b=S(()=>{let t=d.value;return w.value&&(t=t.filter(o=>o.domain&&o.domain.includes(w.value))),m.value&&(t=t.filter(o=>Y(o.id,D.value)&&o.avatar&&o.id&&o.domain)),t}),M=S(()=>[{id:"popularity",title:"人气王榜",description:"综合 Followers 和 Stars 的人气排行",icon:"👑",colorScheme:"fire",showTrend:!1,data:z()},{id:"productive",title:"多产榜",description:"基于公开仓库数量的创作力排行",icon:"🏆",colorScheme:"blue",showTrend:!1,data:N()},{id:"social",title:"社交达人榜",description:"基于 Following 数量的社交活跃度排行",icon:"💬",colorScheme:"green",showTrend:!1,data:R()},{id:"rising",title:"新星榜",description:"综合活跃度指标的潜力新星排行",icon:"🌠",colorScheme:"purple",showTrend:!1,data:c()},{id:"comprehensive",title:"综合实力榜",description:"多维度综合评分的全能排行",icon:"🌟",colorScheme:"gold",showTrend:!1,data:i()}]),q=S(()=>{var t;return(t=k.value)!=null&&t.update_time?new Date(k.value.update_time).toLocaleString("zh-CN"):new Date().toLocaleString("zh-CN")}),V=S(()=>{const t=new Date;return t.setDate(t.getDate()+1),t.setHours(6,0,0,0),t.toLocaleString("zh-CN")});function z(){return b.value.map(t=>({...t,score:(t.followers||0)*.6+(t.total_stars||0)*.4,scoreDisplay:`${t.followers||0} followers + ${t.total_stars||0} stars`})).filter(t=>t.score>0).sort((t,o)=>o.score-t.score).slice(0,$.value).map((t,o)=>({...t,rank:o+1}))}function N(){return b.value.map(t=>({...t,score:t.public_repos||0,scoreDisplay:`${t.public_repos||0} 个仓库`})).filter(t=>t.score>=5).sort((t,o)=>o.score-t.score).slice(0,$.value).map((t,o)=>({...t,rank:o+1}))}function R(){return b.value.map(t=>({...t,score:t.following||0,scoreDisplay:`关注 ${t.following||0} 人`})).filter(t=>t.score>=10).sort((t,o)=>o.score-t.score).slice(0,$.value).map((t,o)=>({...t,rank:o+1}))}function c(){return b.value.map(t=>{const o=Math.max(t.public_repos||1,1),C=((t.followers||0)+(t.total_stars||0))/o*(o<20?1.5:1);return{...t,score:C,scoreDisplay:`活跃度 ${Math.round(C)}`}}).filter(t=>t.score>0).sort((t,o)=>o.score-t.score).slice(0,$.value).map((t,o)=>({...t,rank:o+1}))}function i(){return b.value.map(t=>{const o=(t.total_stars||0)*.3,u=(t.followers||0)*.25,C=(t.public_repos||0)*.2,y=(t.following||0)*.15,A=(t.repositories?t.repositories.split(";").length:0)*.1,O=o+u+C+y+A;return{...t,score:O,scoreDisplay:`综合分 ${Math.round(O)}`}}).filter(t=>t.score>0).sort((t,o)=>o.score-t.score).slice(0,$.value).map((t,o)=>({...t,rank:o+1}))}const v=async()=>{try{h.value=!0,p.value=null;const t="/members-visualization/",o=`${t}data/members.csv`.replace(/\/+/g,"/"),u=`${t}data/commits_weekly.json`.replace(/\/+/g,"/"),[C,y]=await Promise.all([fetch(o),fetch(u)]);if(!C.ok)throw new Error(`HTTP error! status: ${C.status}`);const O=(await C.text()).trim().split(`
`),j=O[0].split(",");d.value=O.slice(1).map(at=>{const Q=at.split(","),X={};return j.forEach((ot,K)=>{const I=ot.trim();let F=Q[K]?Q[K].trim().replace(/^"|"$/g,""):"";["public_repos","total_stars","followers","following"].includes(I)&&(F=parseInt(F)||0),X[I]=F}),X}),y.ok&&(k.value=await y.json());const L=lt("/data/datawhale_member.csv");D.value=await Ue(L)}catch(t){p.value=t.message,console.error("加载数据失败:",t)}finally{h.value=!1}},_=()=>{},s=()=>{w.value="",m.value=!1};return J(()=>{v()}),(t,o)=>(n(),l("div",fa,[h.value?(n(),l("div",ka,[...o[3]||(o[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"正在加载榜单数据...",-1)])])):p.value?(n(),l("div",$a,[e("p",null,"❌ 加载失败: "+r(p.value),1),e("button",{onClick:v,class:"retry-btn"},"重试")])):(n(),l("div",wa,[e("div",Da,[e("div",Ca,[o[5]||(o[5]=e("label",null,"研究方向筛选：",-1)),W(e("select",{"onUpdate:modelValue":o[0]||(o[0]=u=>w.value=u),onChange:_},[o[4]||(o[4]=e("option",{value:""},"全部方向",-1)),(n(!0),l(T,null,H(g.value,u=>(n(),l("option",{key:u,value:u},r(u),9,xa))),128))],544),[[tt,w.value]])]),e("div",Sa,[o[7]||(o[7]=e("label",null,"显示数量：",-1)),W(e("select",{"onUpdate:modelValue":o[1]||(o[1]=u=>$.value=u),onChange:_},[...o[6]||(o[6]=[e("option",{value:10},"Top 10",-1),e("option",{value:20},"Top 20",-1),e("option",{value:50},"Top 50",-1)])],544),[[tt,$.value]])]),e("div",Ma,[e("label",Pa,[W(e("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=u=>m.value=u),onChange:_,class:"checkbox-input"},null,544),[[nt,m.value]]),o[8]||(o[8]=e("span",{class:"checkbox-text"},"仅显示组织成员",-1))])]),w.value||m.value?(n(),l("button",{key:0,onClick:s,class:"clear-filters-btn"}," 清除筛选 ")):f("",!0)]),e("div",Ta,[Z(cs,{"members-data":d.value,"selected-domain":w.value,"top-count":$.value,"show-only-org-members":m.value,"organization-members":D.value},null,8,["members-data","selected-domain","top-count","show-only-org-members","organization-members"])]),e("div",Ha,[Z(_a,{"members-data":d.value,"selected-domain":w.value,"top-count":$.value,"show-only-org-members":m.value,"organization-members":D.value},null,8,["members-data","selected-domain","top-count","show-only-org-members","organization-members"])]),e("div",Na,[(n(!0),l(T,null,H(M.value,u=>(n(),U(Xt,{key:u.id,title:u.title,description:u.description,icon:u.icon,members:u.data,"color-scheme":u.colorScheme,"show-trend":u.showTrend},null,8,["title","description","icon","members","color-scheme","show-trend"]))),128))]),e("div",Oa,[e("p",null,"📅 数据最后更新时间："+r(q.value),1),e("p",null,"🔄 下次更新时间："+r(V.value),1)])]))]))}},qa=E(Va,[["__scopeId","data-v-85a25844"]]),Ba=JSON.parse('{"title":"🏆 贡献者榜单","description":"","frontmatter":{},"headers":[],"relativePath":"rankings.md","filePath":"rankings.md","lastUpdated":1758526430000}'),za={name:"rankings.md"},Aa=Object.assign(za,{setup(a){return(h,p)=>(n(),l("div",null,[p[0]||(p[0]=e("h1",{id:"🏆-贡献者榜单",tabindex:"-1"},[B("🏆 贡献者榜单 "),e("a",{class:"header-anchor",href:"#🏆-贡献者榜单","aria-label":'Permalink to "🏆 贡献者榜单"'},"​")],-1)),p[1]||(p[1]=e("p",null,"欢迎来到 Datawhale 贡献者榜单页面！这里展示了基于 GitHub 数据的各种有趣排行榜，让我们一起看看谁是最闪亮的那颗星⭐",-1)),p[2]||(p[2]=e("h2",{id:"📊-实时榜单",tabindex:"-1"},[B("📊 实时榜单 "),e("a",{class:"header-anchor",href:"#📊-实时榜单","aria-label":'Permalink to "📊 实时榜单"'},"​")],-1)),Z(qa),p[3]||(p[3]=it('<h2 id="📋-榜单说明" tabindex="-1">📋 榜单说明 <a class="header-anchor" href="#📋-榜单说明" aria-label="Permalink to &quot;📋 榜单说明&quot;">​</a></h2><h3 id="🔥-一周卷王榜" tabindex="-1">🔥 一周卷王榜 <a class="header-anchor" href="#🔥-一周卷王榜" aria-label="Permalink to &quot;🔥 一周卷王榜&quot;">​</a></h3><p><strong>计算规则</strong>：基于最近7天的GitHub commit活动综合评分</p><ul><li><strong>基础分</strong>：每个commit = 1分</li><li><strong>连续性奖励</strong>：连续7天+10分，5天+5分，3天+2分</li><li><strong>多仓库奖励</strong>：参与5个以上仓库+5分</li><li><strong>质量奖励</strong>：平均每日5个以上commit+8分，2个以上+2分</li><li><strong>数据源</strong>：GitHub API实时获取</li><li><strong>上榜条件</strong>：至少1个commit</li><li><strong>更新频率</strong>：每日自动更新</li><li><strong>筛选支持</strong>：支持按研究方向和显示数量筛选</li></ul><h3 id="🌙-夜猫榜" tabindex="-1">🌙 夜猫榜 <a class="header-anchor" href="#🌙-夜猫榜" aria-label="Permalink to &quot;🌙 夜猫榜&quot;">​</a></h3><p><strong>计算规则</strong>：基于最近7天深夜时段（22:00-06:00）的GitHub commit活动评分</p><ul><li><strong>基础分</strong>：每个深夜commit = 2分（比普通commit更有价值）</li><li><strong>深夜比例奖励</strong>：深夜提交占比50%以上+10分，30%以上+5分，20%以上+2分</li><li><strong>连续性奖励</strong>：连续5天以上有深夜提交+8分，3天以上+4分</li><li><strong>多仓库奖励</strong>：深夜参与3个以上仓库+3分，2个以上+1分</li><li><strong>时区处理</strong>：自动转换UTC时间为北京时间进行统计</li><li><strong>数据源</strong>：GitHub API commit时间戳分析</li><li><strong>上榜条件</strong>：至少1个深夜commit</li><li><strong>更新频率</strong>：每日自动更新</li><li><strong>筛选支持</strong>：支持按研究方向和显示数量筛选</li></ul><h3 id="🏆-人气王榜" tabindex="-1">🏆 人气王榜 <a class="header-anchor" href="#🏆-人气王榜" aria-label="Permalink to &quot;🏆 人气王榜&quot;">​</a></h3><p><strong>计算规则</strong>：综合考虑 GitHub followers 和 total stars</p><ul><li><strong>权重分配</strong>：Followers × 0.6 + Stars × 0.4</li><li><strong>更新频率</strong>：每日更新</li><li><strong>上榜条件</strong>：至少拥有 10 个 followers 或 50 个 stars</li></ul><h3 id="💼-多产榜" tabindex="-1">💼 多产榜 <a class="header-anchor" href="#💼-多产榜" aria-label="Permalink to &quot;💼 多产榜&quot;">​</a></h3><p><strong>计算规则</strong>：基于公开仓库数量排名</p><ul><li><strong>评分标准</strong>：Public repositories 数量</li><li><strong>更新频率</strong>：每日更新</li><li><strong>上榜条件</strong>：至少拥有 5 个公开仓库</li></ul><h3 id="🤝-社交达人榜" tabindex="-1">🤝 社交达人榜 <a class="header-anchor" href="#🤝-社交达人榜" aria-label="Permalink to &quot;🤝 社交达人榜&quot;">​</a></h3><p><strong>计算规则</strong>：基于 GitHub following 数量</p><ul><li><strong>评分标准</strong>：Following 数量</li><li><strong>更新频率</strong>：每日更新</li><li><strong>上榜条件</strong>：至少关注 20 个用户</li></ul><h3 id="⭐-新星榜" tabindex="-1">⭐ 新星榜 <a class="header-anchor" href="#⭐-新星榜" aria-label="Permalink to &quot;⭐ 新星榜&quot;">​</a></h3><p><strong>计算规则</strong>：综合活跃度指标，适合新加入的贡献者</p><ul><li><strong>评分公式</strong>：(Followers + Stars) / max(Repositories, 1) × 活跃度系数</li><li><strong>活跃度系数</strong>：基于最近的仓库活动和社交互动</li><li><strong>更新频率</strong>：每日更新</li><li><strong>上榜条件</strong>：加入时间相对较短但表现活跃</li></ul><h3 id="🌟-综合实力榜" tabindex="-1">🌟 综合实力榜 <a class="header-anchor" href="#🌟-综合实力榜" aria-label="Permalink to &quot;🌟 综合实力榜&quot;">​</a></h3><p><strong>计算规则</strong>：多维度综合评分</p><ul><li><strong>评分维度</strong>： <ul><li>技术影响力：Stars × 0.3</li><li>社区影响力：Followers × 0.25</li><li>创作能力：Repositories × 0.2</li><li>社交活跃度：Following × 0.15</li><li>参与度：参与项目数 × 0.1</li></ul></li><li><strong>更新频率</strong>：每日更新</li></ul><h2 id="🎯-特色功能" tabindex="-1">🎯 特色功能 <a class="header-anchor" href="#🎯-特色功能" aria-label="Permalink to &quot;🎯 特色功能&quot;">​</a></h2><ul><li><strong>🔄 实时更新</strong>：数据每日自动更新，确保榜单的时效性</li><li><strong>📱 响应式设计</strong>：完美适配桌面端和移动端</li><li><strong>🎨 动画效果</strong>：流畅的排名变化动画和交互效果</li><li><strong>🔍 智能筛选</strong>：支持按研究方向、地区等条件筛选</li><li><strong>📈 趋势分析</strong>：显示排名变化趋势（即将推出）</li><li><strong>🏅 成就系统</strong>：特殊徽章和里程碑展示（即将推出）</li></ul><h2 id="📈-即将推出" tabindex="-1">📈 即将推出 <a class="header-anchor" href="#📈-即将推出" aria-label="Permalink to &quot;📈 即将推出&quot;">​</a></h2><p>我们正在开发更多有趣的榜单功能：</p><ul><li><strong>🌙 夜猫榜</strong>：统计深夜时段（22:00-06:00）的代码提交</li><li><strong>🚀 成长最快榜</strong>：基于followers和stars的增长速度</li><li><strong>🎯 专业榜单</strong>：按研究方向分类的专业排行榜</li><li><strong>🏆 月度MVP</strong>：每月最活跃贡献者</li><li><strong>📊 数据洞察</strong>：更详细的数据分析和可视化</li></ul><h2 id="💡-参与方式" tabindex="-1">💡 参与方式 <a class="header-anchor" href="#💡-参与方式" aria-label="Permalink to &quot;💡 参与方式&quot;">​</a></h2><p>想要在榜单中获得更好的排名？这里有一些建议：</p><ol><li><strong>保持活跃</strong>：定期更新你的GitHub仓库</li><li><strong>优质内容</strong>：创建有价值的开源项目</li><li><strong>社区参与</strong>：积极参与Datawhale的项目和讨论</li><li><strong>完善资料</strong>：保持GitHub个人资料的完整性</li><li><strong>技术分享</strong>：通过博客、演讲等方式分享技术经验</li></ol><hr><p><em>榜单数据来源于GitHub API，每日自动更新。如有疑问或建议，欢迎在项目仓库提出Issue。</em></p>',32))]))}});export{Ba as __pageData,Aa as default};
