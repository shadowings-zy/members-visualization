import{_ as E,h as S,c as l,o as n,j as e,t as r,e as f,n as P,F as N,B as O,N as G,p as C,b as F,a as B,q as X,P as K,v as Z,ag as W,ai as Q,ak as I,G as J,g as tt,aj as et}from"./chunks/framework.Mlx6MwMA.js";const st={class:"rank-badge"},at={key:0,class:"medal"},ot={key:1,class:"rank-number"},nt={class:"avatar-section"},lt=["src","alt"],it={key:1,class:"leaderboard-indicator"},rt={class:"member-info"},ct={class:"name-section"},dt={class:"member-name"},ut={class:"member-meta"},mt={key:0,class:"location"},ht={key:1,class:"company"},gt={key:0,class:"domains-section"},vt={class:"domains"},pt={class:"score-section"},bt={class:"score-value"},yt={class:"score-label"},_t={class:"detailed-stats"},ft={key:0,class:"stat-item"},kt={class:"stat-value"},$t={key:1,class:"stat-item"},wt={class:"stat-value"},Dt={key:2,class:"stat-item"},Ct={class:"stat-value"},xt={class:"actions-section"},St=["href","title"],Mt={__name:"LeaderboardItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},colorScheme:{type:String,default:"blue"},showTrend:{type:Boolean,default:!1},icon:{type:String,default:""},animationDelay:{type:Number,default:0}},setup(a){const p=a,b=S(()=>{const g=p.member.name;return g&&g!=="null"&&g!=="undefined"&&g!=="None"&&g.trim()!==""?g:p.member.id||"æœªçŸ¥ç”¨æˆ·"}),d=g=>({1:"ğŸ¥‡",2:"ğŸ¥ˆ",3:"ğŸ¥‰"})[g]||g,x=g=>{const v="/members-visualization/",M=`${v}default-avatar.svg`.replace(/\/+/g,"/");return g?g.startsWith("avatars/")?`${v}${g}`.replace(/\/+/g,"/"):g.startsWith("http")?g:`${v}${g}`.replace(/\/+/g,"/"):M},$=g=>{const v="/members-visualization/";g.target.src=`${v}default-avatar.svg`.replace(/\/+/g,"/")},k=g=>g?g.split(";").map(v=>v.trim()).filter(v=>v):[],m=()=>{const g=["up","down","stable"];return g[Math.floor(Math.random()*g.length)]},D=()=>{const g=m();return{up:"ğŸ“ˆ",down:"ğŸ“‰",stable:"â¡ï¸"}[g]||"â¡ï¸"};return(g,v)=>(n(),l("div",{class:P(["leaderboard-item leaderboard-item-base",[`rank-${a.rank}`,`theme-${a.colorScheme}`]]),style:G({animationDelay:`${a.animationDelay}ms`})},[e("div",st,[a.rank<=3?(n(),l("span",at,r(d(a.rank)),1)):(n(),l("span",ot,r(a.rank),1))]),e("div",nt,[e("img",{src:x(a.member.avatar),alt:b.value,class:"avatar",onError:$},null,40,lt),a.showTrend?(n(),l("div",{key:0,class:P(["trend-indicator",m()])},r(D()),3)):a.icon?(n(),l("div",it,r(a.icon),1)):f("",!0)]),e("div",rt,[e("div",ct,[e("h4",dt,r(b.value),1),e("div",ut,[a.member.location?(n(),l("span",mt,"ğŸ“ "+r(a.member.location),1)):f("",!0),a.member.company?(n(),l("span",ht,"ğŸ¢ "+r(a.member.company),1)):f("",!0)])]),a.member.domain?(n(),l("div",gt,[e("div",vt,[(n(!0),l(N,null,O(k(a.member.domain),M=>(n(),l("span",{key:M,class:"domain-tag"},r(M),1))),128))])])):f("",!0)]),e("div",pt,[e("div",bt,r(Math.round(a.member.score||0)),1),e("div",yt,r(a.member.scoreDisplay||"åˆ†æ•°"),1),e("div",_t,[a.member.followers?(n(),l("div",ft,[v[0]||(v[0]=e("span",{class:"stat-icon"},"ğŸ‘¥",-1)),e("span",kt,r(a.member.followers),1)])):f("",!0),a.member.total_stars?(n(),l("div",$t,[v[1]||(v[1]=e("span",{class:"stat-icon"},"â­",-1)),e("span",wt,r(a.member.total_stars),1)])):f("",!0),a.member.public_repos?(n(),l("div",Dt,[v[2]||(v[2]=e("span",{class:"stat-icon"},"ğŸ“",-1)),e("span",Ct,r(a.member.public_repos),1)])):f("",!0)])]),e("div",xt,[e("a",{href:a.member.github,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:`è®¿é—® ${b.value} çš„ GitHub`},[...v[3]||(v[3]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,St)])],6))}},Pt=E(Mt,[["__scopeId","data-v-5f28a9fa"]]),Nt={class:"card-header card-header-base"},Ot={class:"title-section title-section-base"},Tt={class:"icon icon-base"},Ht={class:"title title-base"},Vt={class:"description description-base"},qt={class:"stats-badge"},zt={class:"count"},jt={class:"leaderboard-content"},Rt={key:0,class:"empty-state"},Bt={key:1,class:"members-list"},At={class:"card-footer"},Et={class:"ranking-info"},Lt={key:0},Gt={key:1},Ut={__name:"LeaderboardCard",props:{title:{type:String,required:!0},description:{type:String,required:!0},icon:{type:String,default:"ğŸ†"},members:{type:Array,default:()=>[]},colorScheme:{type:String,default:"blue",validator:a=>["fire","blue","green","purple","gold"].includes(a)},showTrend:{type:Boolean,default:!1}},setup(a){const p=a,b=C(!1),d=S(()=>b.value?p.members:p.members.slice(0,5)),x=()=>{b.value=!b.value};return($,k)=>{var m,D,g;return n(),l("div",{class:P(["leaderboard-card leaderboard-card-base",`theme-${a.colorScheme}`])},[e("div",Nt,[e("div",Ot,[e("span",Tt,r(a.icon),1),e("div",null,[e("h3",Ht,r(a.title),1),e("p",Vt,r(a.description),1)])]),e("div",qt,[e("span",zt,r(a.members.length),1),k[0]||(k[0]=e("span",{class:"label"},"äººä¸Šæ¦œ",-1))])]),e("div",jt,[a.members.length===0?(n(),l("div",Rt,[...k[1]||(k[1]=[e("p",null,"æš‚æ— ç¬¦åˆæ¡ä»¶çš„æˆå‘˜",-1)])])):(n(),l("div",Bt,[(n(!0),l(N,null,O(d.value,(v,M)=>(n(),F(Pt,{key:v.id,member:v,rank:v.rank,"color-scheme":a.colorScheme,"show-trend":a.showTrend,icon:a.icon,"animation-delay":M*100},null,8,["member","rank","color-scheme","show-trend","icon","animation-delay"]))),128))]))]),e("div",At,[e("div",Et,[a.members.length>0?(n(),l("span",Lt," å† å†›ï¼š"+r(((m=a.members[0])==null?void 0:m.name)||((D=a.members[0])==null?void 0:D.id)),1)):f("",!0),a.members.length>1?(n(),l("span",Gt," æœ€é«˜åˆ†ï¼š"+r(Math.round(((g=a.members[0])==null?void 0:g.score)||0)),1)):f("",!0)]),a.members.length>5?(n(),l("button",{key:0,onClick:x,class:"expand-btn"},[B(r(b.value?"æ”¶èµ·":"æŸ¥çœ‹æ›´å¤š")+" ",1),e("span",{class:P(["arrow",{expanded:b.value}])},"â–¼",2)])):f("",!0)])],2)}}},Ft=E(Ut,[["__scopeId","data-v-6e65b0db"]]),Wt={class:"rank-badge"},Jt={key:0,class:"medal"},Zt={key:1,class:"rank-number"},Yt={class:"avatar-section"},Qt=["src","alt"],Xt={class:"member-info"},Kt={class:"name-section"},It={class:"member-name"},te={class:"member-meta"},ee={key:0,class:"location"},se={key:1,class:"company"},ae={key:0,class:"domains-section"},oe={class:"domains"},ne={class:"daily-chart-section"},le={class:"daily-chart"},ie=["title"],re={key:0,class:"bar-fill"},ce={class:"score-section"},de={class:"score-value"},ue={class:"score-label"},me={class:"detailed-stats"},he={key:0,class:"stat-item"},ge={class:"stat-value"},ve={key:1,class:"stat-item"},pe={class:"stat-value"},be={key:2,class:"stat-item"},ye={class:"stat-value"},_e={class:"popup-header"},fe={class:"popup-content"},ke={class:"top-sections"},$e={class:"detail-section stats-section"},we={key:0,class:"detail-section repos-section"},De={class:"repo-tags"},Ce=["href","title"],xe={key:0,class:"detail-section"},Se={class:"commit-messages"},Me=["href","title"],Pe={class:"commit-text"},Ne={class:"commit-meta"},Oe={class:"repo-link"},Te={class:"actions-section"},He=["href"],Ve={__name:"WeeklyCommitItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},animationDelay:{type:Number,default:0},showDetails:{type:Boolean,default:!1}},emits:["toggle-details"],setup(a,{emit:p}){const b=s=>s?s.split(";").map(t=>t.trim()).filter(Boolean):[],d=a,x=s=>{s.target.closest&&(s.target.closest(".github-link")||s.target.closest(".details-popup"))||$("toggle-details",d.member.user_key)},$=p,k=C(null),m=C(null),D=C("bottom"),g=async()=>{if(!d.showDetails||(await K(),!m.value))return;const s=m.value.closest(".leaderboard-content")||m.value.closest(".commits-list")||m.value.closest(".weekly-commits-card");if(!s){D.value="bottom";return}const t=s.querySelectorAll(".weekly-commit-item"),o=Array.from(t).indexOf(m.value),u=t.length;if(o>=u-2){D.value="top";return}const w=m.value.getBoundingClientRect(),y=s.getBoundingClientRect(),R=320,V=20,A=y.bottom-w.bottom,L=w.top-y.top;A<R+V&&L>R+V?D.value="top":D.value="bottom"};X(()=>d.showDetails,s=>{s&&g()});const v=S(()=>{const s=d.member.name;return s&&s!=="null"&&s!=="undefined"&&s!=="None"&&s.trim()!==""?s:d.member.id?d.member.id:d.member.display_name||d.member.user_key||"æœªçŸ¥ç”¨æˆ·"}),M=s=>{const t=s.getFullYear(),o=String(s.getMonth()+1).padStart(2,"0"),u=String(s.getDate()).padStart(2,"0");return`${t}-${o}-${u}`},q=S(()=>{const s=d.member.daily_commits?Object.keys(d.member.daily_commits):[];let t=new Date;if(s.length){const u=s.map(w=>new Date(w)).filter(w=>!isNaN(w));u.length&&(t=u.sort((w,y)=>w-y)[u.length-1])}const o=[];for(let u=6;u>=0;u--){const w=new Date(t);w.setDate(w.getDate()-u),o.push(M(w))}return o}),H=S(()=>{const s=d.member.daily_commits||{};return q.value.map(t=>{const o=Object.prototype.hasOwnProperty.call(s,t),u=o&&s[t]||0;return{date:t,count:u,hasData:o}})}),z=S(()=>{const s=[],t=d.member.total_commits,o=d.member.repo_count,u=d.member.active_days;return typeof t=="number"&&s.push(`${t} æ¬¡`),typeof o=="number"&&s.push(`${o} ä»“åº“`),typeof u=="number"&&s.push(`${u} å¤©`),s.join(" â€¢ ")}),T=s=>({1:"ğŸ¥‡",2:"ğŸ¥ˆ",3:"ğŸ¥‰"})[s]||s,j=s=>{const t="/members-visualization/",o=`${t}default-avatar.svg`.replace(/\/+/g,"/");return s?s.startsWith("avatars/")?`${t}${s}`.replace(/\/+/g,"/"):s.startsWith("http")?s:`${t}${s}`.replace(/\/+/g,"/"):o},c=s=>{const t="/members-visualization/";s.target.src=`${t}default-avatar.svg`.replace(/\/+/g,"/")},i=s=>{const t=H.value.filter(u=>u.hasData).map(u=>u.count),o=t.length?Math.max(...t):0;return o>0?s/o*100:0},h=()=>{const s=d.member.avg_commits_per_day||0,t=d.member.active_days||0;return s>=3&&t>=5?"up":s>=2&&t>=3?"stable":"down"},_=()=>{const s=h();return{up:"ğŸ“ˆ",stable:"â¡ï¸",down:"ğŸ“‰"}[s]||"â¡ï¸"};return(s,t)=>{var o,u,w;return n(),l("div",{ref_key:"itemRef",ref:m,class:P(["weekly-commit-item leaderboard-item-base",[`rank-${a.rank}`,{"is-expanded":d.showDetails}]]),style:G({animationDelay:`${a.animationDelay}ms`}),onClick:x},[e("div",Wt,[a.rank<=3?(n(),l("span",Jt,r(T(a.rank)),1)):(n(),l("span",Zt,r(a.rank),1))]),e("div",Yt,[e("img",{src:j(a.member.avatar),alt:v.value,class:"avatar",onError:c},null,40,Qt),t[1]||(t[1]=e("div",{class:"fire-indicator"},"ğŸ”¥",-1))]),e("div",Xt,[e("div",Kt,[e("h4",It,r(v.value),1),e("div",te,[a.member.location?(n(),l("span",ee,"ğŸ“ "+r(a.member.location),1)):f("",!0),a.member.company?(n(),l("span",se,"ğŸ¢ "+r(a.member.company),1)):f("",!0)])]),a.member.domain?(n(),l("div",ae,[e("div",oe,[(n(!0),l(N,null,O(b(a.member.domain),y=>(n(),l("span",{key:y,class:"domain-tag"},r(y),1))),128))])])):f("",!0)]),e("div",ne,[t[2]||(t[2]=e("div",{class:"chart-title"},"æ¯æ—¥åˆ†å¸ƒ",-1)),e("div",le,[(n(!0),l(N,null,O(H.value,y=>(n(),l("div",{key:y.date,class:P(y.hasData?"day-bar":"day-dash"),style:G(y.hasData?{height:`${i(y.count)}%`}:{}),title:y.hasData?`${y.date}: ${y.count} commits`:`${y.date}: æ— æ•°æ®`},[y.hasData?(n(),l("div",re)):f("",!0)],14,ie))),128))])]),e("div",ce,[e("div",de,r(a.member.score),1),e("div",ue,r(z.value),1),e("div",me,[a.member.followers?(n(),l("div",he,[t[3]||(t[3]=e("span",{class:"stat-icon"},"ğŸ‘¥",-1)),e("span",ge,r(a.member.followers),1)])):f("",!0),a.member.total_stars?(n(),l("div",ve,[t[4]||(t[4]=e("span",{class:"stat-icon"},"â­",-1)),e("span",pe,r(a.member.total_stars),1)])):f("",!0),a.member.public_repos?(n(),l("div",be,[t[5]||(t[5]=e("span",{class:"stat-icon"},"ğŸ“",-1)),e("span",ye,r(a.member.public_repos),1)])):f("",!0)]),e("div",{class:P(["trend-indicator",h()])},r(_()),3)]),d.showDetails?(n(),l("div",{key:0,ref_key:"popupRef",ref:k,class:P(["details-popup",`popup-${D.value}`])},[e("div",_e,[e("h5",null,r(v.value)+" çš„æœ¬å‘¨æˆ˜ç»©",1),e("button",{onClick:t[0]||(t[0]=y=>$("toggle-details",d.member.user_key)),class:"close-btn"},"Ã—")]),e("div",fe,[e("div",ke,[e("div",$e,[t[6]||(t[6]=e("h6",null,"ğŸ“Š ç»Ÿè®¡æ¦‚è§ˆ",-1)),e("ul",null,[e("li",null,"æ€»commitæ•°ï¼š"+r(a.member.total_commits),1),e("li",null,"å‚ä¸ä»“åº“ï¼š"+r(a.member.repo_count)+" ä¸ª",1),e("li",null,"æ´»è·ƒå¤©æ•°ï¼š"+r(a.member.active_days)+" å¤©",1),e("li",null,"å¹³å‡æ¯æ—¥ï¼š"+r((o=a.member.avg_commits_per_day)==null?void 0:o.toFixed(1))+" commits",1)])]),(u=a.member.repos)!=null&&u.length?(n(),l("div",we,[t[8]||(t[8]=e("h6",null,"ğŸ“ ä¸»è¦ä»“åº“",-1)),e("div",De,[(n(!0),l(N,null,O(a.member.repos.slice(0,5),y=>(n(),l("a",{key:y,href:`https://github.com/datawhalechina/${y}`,target:"_blank",rel:"noopener noreferrer",class:"repo-tag repo-link-tag",title:`è®¿é—®ä»“åº“: ${y}`},[B(r(y)+" ",1),t[7]||(t[7]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"10",height:"10"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))],8,Ce))),128))])])):f("",!0)]),(w=a.member.commit_messages)!=null&&w.length?(n(),l("div",xe,[t[10]||(t[10]=e("h6",null,"ğŸ’¬ æœ€è¿‘æäº¤",-1)),e("div",Se,[(n(!0),l(N,null,O(a.member.commit_messages.slice(0,3),y=>(n(),l("div",{key:y.url,class:"commit-message"},[e("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",class:"commit-link",title:`æŸ¥çœ‹æäº¤è¯¦æƒ…: ${y.message}`},[e("div",Pe,r(y.message),1),e("div",Ne,[e("span",Oe,r(y.repo),1),B(" â€¢ "+r(y.date)+" ",1),t[9]||(t[9]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"12",height:"12"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))])],8,Me)]))),128))])])):f("",!0)])],2)):f("",!0),e("div",Te,[a.member.github_username?(n(),l("a",{key:0,href:`https://github.com/${a.member.github_username}`,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:"è®¿é—®GitHub"},[...t[11]||(t[11]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,He)):f("",!0)]),t[12]||(t[12]=e("div",{class:"click-overlay","aria-hidden":"true"},null,-1))],6)}}},qe=E(Ve,[["__scopeId","data-v-1543a12a"]]);function ze(a){const p=new Set;return a.forEach(b=>{b.id&&b.id.trim()&&p.add(b.id.trim())}),p}async function je(a="/data/datawhale_member.json"){try{console.log(`Loading organization members from: ${a}`);const p=await fetch(a);if(!p.ok)throw new Error(`Failed to fetch json: ${p.status}`);const b=await p.json(),d=ze(b);return console.log(`Loaded ${d.size} organization members from JSON`),d}catch(p){return console.error("Error loading organization members:",p),new Set}}function Y(a,p){return!a||!p?!1:p.has(a)}const Re={class:"card-header card-header-base"},Be={class:"stats-badge"},Ae={class:"count"},Ee={class:"update-info-section"},Le={class:"time-info"},Ge={class:"update-time"},Ue={class:"leaderboard-content"},Fe={key:0,class:"loading-state"},We={key:1,class:"error-state"},Je={key:2,class:"empty-state"},Ze={key:0},Ye={key:1},Qe={key:2,class:"empty-hint"},Xe={key:3,class:"empty-hint"},Ke={key:3,class:"commits-list"},Ie={key:0,class:"card-footer"},ts={class:"ranking-info"},es={__name:"WeeklyCommitsCard",props:{membersData:{type:Array,default:()=>[]},selectedDomain:{type:String,default:""},topCount:{type:Number,default:20},showOnlyOrgMembers:{type:Boolean,default:!1},organizationMembers:{type:Set,default:()=>new Set}},setup(a){const p=a,b=C(!0),d=C(null),x=C(null),$=C(!1),k=C(null),m=S(()=>{var h;if(!((h=x.value)!=null&&h.user_commits))return[];const c=[];for(const[_,s]of Object.entries(x.value.user_commits))if(s.total_commits>=1){const t=p.membersData.find(u=>u.id===_);if(p.showOnlyOrgMembers&&(!t||!Y(_,p.organizationMembers)))continue;const o={user_key:_,id:(t==null?void 0:t.id)||_,name:(t==null?void 0:t.name)||null,display_name:M(_,t),github_username:q(_),avatar:(t==null?void 0:t.avatar)||null,location:(t==null?void 0:t.location)||null,company:(t==null?void 0:t.company)||null,domain:(t==null?void 0:t.domain)||"",followers:(t==null?void 0:t.followers)??(t==null?void 0:t.followers_count)??0,total_stars:(t==null?void 0:t.total_stars)??(t==null?void 0:t.stars)??0,public_repos:(t==null?void 0:t.public_repos)??(t==null?void 0:t.repo_count)??0,...s,score:H(s)};p.selectedDomain?t&&t.domain&&t.domain.includes(p.selectedDomain)&&c.push(o):c.push(o)}return c.sort((_,s)=>s.score-_.score).slice(0,p.topCount)}),D=S(()=>$.value?m.value:m.value.slice(0,5)),g=S(()=>m.value.reduce((c,i)=>c+i.total_commits,0)),v=S(()=>{var i;return(i=x.value)!=null&&i.update_time?new Date(x.value.update_time).toLocaleString("zh-CN"):"æœªçŸ¥"}),M=(c,i)=>{if(i!=null&&i.name&&i.name!=="null"&&i.name!=="undefined"&&i.name!=="None"&&i.name.trim()!=="")return i.name;if(i!=null&&i.id)return i.id;if(!c.includes("@"))return c;const h=c.match(/^([^@]+)@/);return h?h[1]:c},q=c=>c.includes("@")?null:c,H=c=>{let i=0;i+=c.total_commits;const h=c.active_days||0;h>=7?i+=10:h>=5?i+=5:h>=3&&(i+=2);const _=c.repo_count||0;_>=5?i+=5:_>=3?i+=3:_>=2&&(i+=1);const s=c.avg_commits_per_day||0;return s>=5?i+=8:s>=3?i+=5:s>=2&&(i+=2),Math.round(i)},z=c=>{k.value===c?k.value=null:k.value=c},T=async()=>{try{b.value=!0,d.value=null;const i="/members-visualization/data/commits_weekly.json".replace(/\/+/g,"/"),h=await fetch(i);if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);x.value=await h.json()}catch(c){d.value=c.message,console.error("åŠ è½½commitæ•°æ®å¤±è´¥:",c)}finally{b.value=!1}},j=()=>{$.value=!$.value};return Z(()=>{T()}),(c,i)=>{var h;return n(),l("div",{class:P(["weekly-commits-card leaderboard-card-base","theme-fire"])},[e("div",Re,[i[1]||(i[1]=e("div",{class:"title-section title-section-base"},[e("span",{class:"icon icon-base animated-fire"},"ğŸ”¥"),e("div",null,[e("h3",{class:"title title-base"},"ä¸€å‘¨å·ç‹æ¦œ"),e("p",{class:"description description-base"},"åŸºäºæœ€è¿‘7å¤©commitæ´»åŠ¨çš„è¶…çº§å·ç‹æ’è¡Œ")])],-1)),e("div",Be,[e("span",Ae,r(m.value.length),1),i[0]||(i[0]=e("span",{class:"label"},"å¤§å·ç‹",-1))])]),e("div",Ee,[e("div",Le,[i[2]||(i[2]=e("span",{class:"time-label"},"ğŸ“… æœ€è¿‘7å¤©æ´»è·ƒæ•°æ®",-1)),e("span",Ge,r(v.value),1)])]),e("div",Ue,[b.value?(n(),l("div",Fe,[...i[3]||(i[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"æ­£åœ¨åŠ è½½commitæ•°æ®...",-1)])])):d.value?(n(),l("div",We,[e("p",null,"âŒ "+r(d.value),1),e("button",{onClick:T,class:"retry-btn"},"é‡è¯•")])):m.value.length===0?(n(),l("div",Je,[i[4]||(i[4]=e("div",{class:"empty-icon"},"ğŸ˜´",-1)),a.showOnlyOrgMembers?(n(),l("p",Ze,"ç»„ç»‡æˆå‘˜æœ¬å‘¨æš‚æ— commitæ´»åŠ¨")):(n(),l("p",Ye,"æœ¬å‘¨æš‚æ— commitæ´»åŠ¨")),a.showOnlyOrgMembers?(n(),l("p",Qe,"ç»„ç»‡æˆå‘˜ä»¬å¿«å»å†™ä»£ç å§ï¼")):(n(),l("p",Xe,"å¿«å»å†™ä»£ç å§ï¼"))])):(n(),l("div",Ke,[(n(!0),l(N,null,O(D.value,(_,s)=>(n(),F(qe,{key:_.user_key,member:_,rank:s+1,"animation-delay":s*100,"show-details":k.value===_.user_key,onToggleDetails:z},null,8,["member","rank","animation-delay","show-details"]))),128))]))]),m.value.length>0?(n(),l("div",Ie,[e("div",ts,[e("span",null,"ğŸ† æœ¬å‘¨å·ç‹ï¼š"+r((h=m.value[0])==null?void 0:h.display_name),1),e("span",null,"ğŸ“Š æ€»commitæ•°ï¼š"+r(g.value),1)]),m.value.length>5?(n(),l("button",{key:0,onClick:j,class:"expand-btn"},[B(r($.value?"æ”¶èµ·":"æŸ¥çœ‹æ›´å¤š")+" ",1),e("span",{class:P(["arrow",{expanded:$.value}])},"â–¼",2)])):f("",!0)])):f("",!0)])}}},ss=E(es,[["__scopeId","data-v-e0fd796e"]]),as={class:"rank-badge"},os={key:0,class:"medal"},ns={key:1,class:"rank-number"},ls={class:"avatar-section"},is=["src","alt"],rs={class:"member-info"},cs={class:"name-section"},ds={class:"member-name"},us={class:"member-meta"},ms={key:0,class:"location"},hs={key:1,class:"company"},gs={key:0,class:"domains-section"},vs={class:"domains"},ps={class:"night-chart-section"},bs={class:"night-chart"},ys=["title"],_s={class:"score-section"},fs={class:"score-value night-score"},ks={class:"score-label"},$s={class:"detailed-stats"},ws={key:0,class:"stat-item"},Ds={class:"stat-value"},Cs={key:1,class:"stat-item"},xs={class:"stat-value"},Ss={key:2,class:"stat-item"},Ms={class:"stat-value"},Ps={class:"actions-section"},Ns=["href"],Os={class:"popup-header"},Ts={class:"popup-content"},Hs={class:"top-sections"},Vs={class:"detail-section stats-section"},qs={class:"detail-section analysis-section"},zs={class:"night-hours-detail"},js={class:"hour-label"},Rs={class:"hour-count"},Bs={key:0,class:"detail-section"},As={class:"commit-messages"},Es=["href","title"],Ls={class:"commit-text"},Gs={class:"commit-meta"},Us={class:"repo-link"},Fs={class:"night-time"},Ws={__name:"NightOwlItem",props:{member:{type:Object,required:!0},rank:{type:Number,required:!0},animationDelay:{type:Number,default:0},showDetails:{type:Boolean,default:!1}},emits:["toggle-details"],setup(a,{emit:p}){const b=s=>s?s.split(";").map(t=>t.trim()).filter(Boolean):[],d=a,x=p,$=s=>{s.target.closest&&(s.target.closest(".github-link")||s.target.closest(".details-popup"))||x("toggle-details",d.member.user_key)},k=C(null),m=C(null),D=C("bottom"),g=[22,23,0,1,2,3,4,5],v=S(()=>{const s=d.member.name;return s&&s!=="null"&&s!=="undefined"&&s!=="None"&&s.trim()!==""?s:d.member.id?d.member.id:d.member.display_name||d.member.user_key||"æœªçŸ¥ç”¨æˆ·"}),M=S(()=>(d.member.commit_messages||[]).filter(s=>s.is_night_owl)),q=S(()=>{const s=[],t=d.member.night_owl_commits,o=d.member.night_owl_percentage;return typeof t=="number"&&s.push(`${t} æ·±å¤œ`),typeof o=="number"&&s.push(`${o}%`),s.join(" â€¢ ")}),H=s=>({1:"ğŸ¥‡",2:"ğŸ¥ˆ",3:"ğŸ¥‰"})[s]||s,z=s=>{if(!s)return"/default-avatar.png";const t="/members-visualization/";return s.startsWith("http")?s:`${t}${s}`.replace(/\/+/g,"/")},T=s=>{s.target.src="/default-avatar.png"},j=s=>{const t=d.member.beijing_hourly_distribution[s]||0,o=Math.max(...g.map(u=>d.member.beijing_hourly_distribution[u]||0));return o>0?t/o*100:0},c=()=>{const s=d.member.night_owl_percentage||0;return s>=50?"trend-hot":s>=30?"trend-warm":"trend-cool"},i=()=>{const s=d.member.night_owl_percentage||0;return s>=50?"â†—":s>=30?"â†’":"â†˜"},h=s=>`${s.toString().padStart(2,"0")}:00`,_=async()=>{if(!(!d.showDetails||!m.value)){await K();try{const s=m.value.closest(".commits-list");if(!s){D.value="bottom";return}const t=s.querySelectorAll(".night-owl-item"),o=Array.from(t).indexOf(m.value),u=t.length;if(o>=u-2){D.value="top";return}const w=m.value.getBoundingClientRect(),y=s.getBoundingClientRect(),R=320,V=20,A=y.bottom-w.bottom,L=w.top-y.top;A<R+V&&L>R+V?D.value="top":D.value="bottom"}catch(s){console.warn("å¼¹çª—å®šä½è®¡ç®—å¤±è´¥:",s),D.value="bottom"}}};return X(()=>d.showDetails,s=>{s&&_()},{immediate:!0}),(s,t)=>(n(),l("div",{ref_key:"itemRef",ref:m,class:P(["night-owl-item leaderboard-item-base",[`rank-${a.rank}`,{"is-expanded":d.showDetails}]]),style:G({animationDelay:`${a.animationDelay}ms`}),onClick:$},[e("div",as,[a.rank<=3?(n(),l("span",os,r(H(a.rank)),1)):(n(),l("span",ns,r(a.rank),1))]),e("div",ls,[e("img",{src:z(a.member.avatar),alt:v.value,class:"avatar",onError:T},null,40,is),t[1]||(t[1]=e("div",{class:"moon-indicator"},"ğŸŒ™",-1))]),e("div",rs,[e("div",cs,[e("h4",ds,r(v.value),1),e("div",us,[a.member.location?(n(),l("span",ms,"ğŸ“ "+r(a.member.location),1)):f("",!0),a.member.company?(n(),l("span",hs,"ğŸ¢ "+r(a.member.company),1)):f("",!0)])]),a.member.domain?(n(),l("div",gs,[e("div",vs,[(n(!0),l(N,null,O(b(a.member.domain),o=>(n(),l("span",{key:o,class:"domain-tag"},r(o),1))),128))])])):f("",!0)]),e("div",ps,[t[3]||(t[3]=e("div",{class:"chart-title"},"æ·±å¤œåˆ†å¸ƒ",-1)),e("div",bs,[(n(),l(N,null,O(g,o=>e("div",{key:o,class:"hour-bar",style:G({height:`${j(o)}%`}),title:`${o}:00 - ${a.member.beijing_hourly_distribution[o]||0} commits`},[...t[2]||(t[2]=[e("div",{class:"bar-fill night-bar-fill"},null,-1)])],12,ys)),64))])]),e("div",_s,[e("div",fs,r(a.member.night_owl_score),1),e("div",ks,r(q.value),1),e("div",$s,[a.member.followers?(n(),l("div",ws,[t[4]||(t[4]=e("span",{class:"stat-icon"},"ğŸ‘¥",-1)),e("span",Ds,r(a.member.followers),1)])):f("",!0),a.member.total_stars?(n(),l("div",Cs,[t[5]||(t[5]=e("span",{class:"stat-icon"},"â­",-1)),e("span",xs,r(a.member.total_stars),1)])):f("",!0),a.member.public_repos?(n(),l("div",Ss,[t[6]||(t[6]=e("span",{class:"stat-icon"},"ğŸ“",-1)),e("span",Ms,r(a.member.public_repos),1)])):f("",!0)]),e("div",{class:P(["trend-indicator night-trend",c()])},r(i()),3)]),e("div",Ps,[a.member.github_username?(n(),l("a",{key:0,href:`https://github.com/${a.member.github_username}`,target:"_blank",rel:"noopener noreferrer",class:"github-link",title:"è®¿é—®GitHub"},[...t[7]||(t[7]=[e("svg",{class:"github-icon",viewBox:"0 0 24 24",width:"16",height:"16"},[e("path",{fill:"currentColor",d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.30.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})],-1)])],8,Ns)):f("",!0)]),d.showDetails?(n(),l("div",{key:0,ref_key:"popupRef",ref:k,class:P(["details-popup night-popup",`popup-${D.value}`])},[e("div",Os,[e("h5",null,r(v.value)+" çš„æ·±å¤œæˆ˜ç»©",1),e("button",{onClick:t[0]||(t[0]=o=>x("toggle-details",d.member.user_key)),class:"close-btn"},"Ã—")]),e("div",Ts,[e("div",Hs,[e("div",Vs,[t[8]||(t[8]=e("h6",null,"ğŸŒ™ æ·±å¤œç»Ÿè®¡",-1)),e("ul",null,[e("li",null,"æ·±å¤œcommitï¼š"+r(a.member.night_owl_commits)+" ä¸ª",1),e("li",null,"æ·±å¤œæ¯”ä¾‹ï¼š"+r(a.member.night_owl_percentage)+"%",1),e("li",null,"å¤œçŒ«åˆ†æ•°ï¼š"+r(a.member.night_owl_score)+" åˆ†",1),e("li",null,"æ´»è·ƒå¤©æ•°ï¼š"+r(a.member.active_days)+" å¤©",1)])]),e("div",qs,[t[9]||(t[9]=e("h6",null,"ğŸ“Š æ—¶æ®µåˆ†æ",-1)),e("div",zs,[(n(),l(N,null,O(g,o=>e("div",{key:o,class:"hour-detail"},[e("span",js,r(o)+":00",1),e("span",Rs,r(a.member.beijing_hourly_distribution[o]||0),1)])),64))])])]),M.value.length?(n(),l("div",Bs,[t[12]||(t[12]=e("h6",null,"ğŸŒƒ æ·±å¤œæäº¤è®°å½•",-1)),e("div",As,[(n(!0),l(N,null,O(M.value.slice(0,3),o=>(n(),l("div",{key:o.url,class:"commit-message night-commit"},[e("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",class:"commit-link",title:`æŸ¥çœ‹æäº¤è¯¦æƒ…: ${o.message}`},[e("div",Ls,r(o.message),1),e("div",Gs,[e("span",Us,r(o.repo),1),t[10]||(t[10]=B(" â€¢ ",-1)),e("span",Fs,r(h(o.beijing_hour)),1),B(" â€¢ "+r(o.date)+" ",1),t[11]||(t[11]=e("svg",{class:"external-link-icon",viewBox:"0 0 24 24",width:"12",height:"12"},[e("path",{fill:"currentColor",d:"M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"})],-1))])],8,Es)]))),128))])])):f("",!0)])],2)):f("",!0),t[13]||(t[13]=e("div",{class:"click-overlay","aria-hidden":"true"},null,-1))],6))}},Js=E(Ws,[["__scopeId","data-v-0cf7641f"]]),Zs={class:"card-header card-header-base"},Ys={class:"stats-badge"},Qs={class:"count"},Xs={class:"update-info-section"},Ks={class:"time-info"},Is={class:"update-time"},ta={class:"leaderboard-content"},ea={key:0,class:"loading-state"},sa={key:1,class:"error-state"},aa={key:2,class:"empty-state"},oa={key:0},na={key:1},la={key:2,class:"empty-hint"},ia={key:3,class:"empty-hint"},ra={key:3,class:"commits-list"},ca={key:0,class:"card-footer"},da={class:"ranking-info"},ua={__name:"NightOwlCard",props:{membersData:{type:Array,default:()=>[]},selectedDomain:{type:String,default:""},topCount:{type:Number,default:20},showOnlyOrgMembers:{type:Boolean,default:!1},organizationMembers:{type:Set,default:()=>new Set}},setup(a){const p=a,b=C(!1),d=C(null),x=C(null),$=C(null),k=C(!1),m=S(()=>{var i;if(!((i=x.value)!=null&&i.user_commits))return[];const c=[];for(const[h,_]of Object.entries(x.value.user_commits))if(_.night_owl_commits>=1){const s=p.membersData.find(o=>o.id===h);if(p.showOnlyOrgMembers&&(!s||!Y(h,p.organizationMembers)))continue;const t={user_key:h,id:(s==null?void 0:s.id)||h,name:(s==null?void 0:s.name)||null,display_name:M(h,s),github_username:q(h),avatar:(s==null?void 0:s.avatar)||null,location:(s==null?void 0:s.location)||null,company:(s==null?void 0:s.company)||null,domain:(s==null?void 0:s.domain)||"",followers:(s==null?void 0:s.followers)??(s==null?void 0:s.followers_count)??0,total_stars:(s==null?void 0:s.total_stars)??(s==null?void 0:s.stars)??0,public_repos:(s==null?void 0:s.public_repos)??(s==null?void 0:s.repo_count)??0,..._,night_owl_score:H(_)};p.selectedDomain?s&&s.domain&&s.domain.includes(p.selectedDomain)&&c.push(t):c.push(t)}return c.sort((h,_)=>_.night_owl_score-h.night_owl_score)}),D=S(()=>{const c=k.value?p.topCount:Math.min(5,p.topCount);return m.value.slice(0,c)}),g=S(()=>m.value.reduce((c,i)=>c+i.night_owl_commits,0)),v=S(()=>{var c;if(!((c=x.value)!=null&&c.update_time))return"æœªçŸ¥";try{return new Date(x.value.update_time).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return"æœªçŸ¥"}}),M=(c,i)=>i!=null&&i.name&&i.name!=="null"&&i.name!=="undefined"&&i.name!=="None"&&i.name.trim()!==""?i.name:i!=null&&i.id?i.id:c.includes("@")?c.split("@")[0]:c,q=c=>c.includes("@")?c.split("@")[0]:c,H=c=>{let i=0;i+=c.night_owl_commits*2;const h=c.night_owl_percentage||0;h>=50?i+=10:h>=30?i+=5:h>=20&&(i+=2);const _=c.active_days||0;_>=5?i+=8:_>=3&&(i+=4);const s=c.repo_count||0;return s>=3?i+=3:s>=2&&(i+=1),Math.round(i)},z=c=>{$.value===c?$.value=null:$.value=c},T=async()=>{try{b.value=!0,d.value=null;const i="/members-visualization/data/commits_weekly.json".replace(/\/+/g,"/"),h=await fetch(i);if(!h.ok)throw new Error(`HTTP error! status: ${h.status}`);x.value=await h.json()}catch(c){d.value=c.message,console.error("åŠ è½½commitæ•°æ®å¤±è´¥:",c)}finally{b.value=!1}},j=()=>{k.value=!k.value};return Z(()=>{T()}),(c,i)=>{var h;return n(),l("div",{class:P(["night-owl-card leaderboard-card-base","theme-night"])},[e("div",Zs,[i[1]||(i[1]=e("div",{class:"title-section title-section-base"},[e("span",{class:"icon icon-base animated-moon"},"ğŸŒ™"),e("div",null,[e("h3",{class:"title title-base"},"å¤œçŒ«æ¦œ"),e("p",{class:"description description-base"},"æ·±å¤œæ—¶æ®µï¼ˆ22:00-06:00ï¼‰ä»£ç æäº¤æ´»è·ƒåº¦æ’è¡Œ")])],-1)),e("div",Ys,[e("span",Qs,r(m.value.length),1),i[0]||(i[0]=e("span",{class:"label"},"å¤œçŒ«å­",-1))])]),e("div",Xs,[e("div",Ks,[i[2]||(i[2]=e("span",{class:"time-label"},"ğŸŒƒ æœ€è¿‘7å¤©æ·±å¤œæ´»åŠ¨æ•°æ®",-1)),e("span",Is,r(v.value),1)])]),e("div",ta,[b.value?(n(),l("div",ea,[...i[3]||(i[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"æ­£åœ¨åŠ è½½å¤œçŒ«æ•°æ®...",-1)])])):d.value?(n(),l("div",sa,[e("p",null,"âŒ "+r(d.value),1),e("button",{onClick:T,class:"retry-btn"},"é‡è¯•")])):m.value.length===0?(n(),l("div",aa,[i[4]||(i[4]=e("div",{class:"empty-icon"},"ğŸ˜´",-1)),a.showOnlyOrgMembers?(n(),l("p",oa,"ç»„ç»‡æˆå‘˜æœ¬å‘¨æš‚æ— æ·±å¤œæäº¤æ´»åŠ¨")):(n(),l("p",na,"æœ¬å‘¨æš‚æ— æ·±å¤œæäº¤æ´»åŠ¨")),a.showOnlyOrgMembers?(n(),l("p",la,"ç»„ç»‡æˆå‘˜ä»¬æ—©ç¡æ—©èµ·èº«ä½“å¥½ï¼")):(n(),l("p",ia,"æ—©ç¡æ—©èµ·èº«ä½“å¥½ï¼"))])):(n(),l("div",ra,[(n(!0),l(N,null,O(D.value,(_,s)=>(n(),F(Js,{key:_.user_key,member:_,rank:s+1,"animation-delay":s*100,"show-details":$.value===_.user_key,onToggleDetails:z},null,8,["member","rank","animation-delay","show-details"]))),128))]))]),m.value.length>0?(n(),l("div",ca,[e("div",da,[e("span",null,"å¤œçŒ«ç‹ï¼š"+r((h=m.value[0])==null?void 0:h.display_name),1),e("span",null,"æ€»æ·±å¤œcommitæ•°ï¼š"+r(g.value),1)]),m.value.length>5?(n(),l("button",{key:0,onClick:j,class:"expand-btn"},[B(r(k.value?"æ”¶èµ·":"æŸ¥çœ‹æ›´å¤š")+" ",1),e("span",{class:P(["arrow",{expanded:k.value}])},"â–¼",2)])):f("",!0)])):f("",!0)])}}},ma=E(ua,[["__scopeId","data-v-76718128"]]),ha={class:"rankings-container"},ga={key:0,class:"loading-state"},va={key:1,class:"error-state"},pa={key:2,class:"rankings-content"},ba={class:"filters-section"},ya={class:"filter-group"},_a=["value"],fa={class:"filter-group"},ka={class:"filter-group checkbox-group"},$a={class:"checkbox-label"},wa={class:"weekly-commits-section"},Da={class:"night-owl-section"},Ca={class:"leaderboards-grid"},xa={class:"update-info"},Sa={__name:"Rankings",setup(a){const p=C(!0),b=C(null),d=C([]),x=C(null),$=C(""),k=C(20),m=C(!1),D=C(new Set),g=S(()=>{const t=new Set;return d.value.forEach(o=>{o.domain&&o.domain.split(";").forEach(u=>t.add(u.trim()))}),Array.from(t).sort()}),v=S(()=>{let t=d.value;return $.value&&(t=t.filter(o=>o.domain&&o.domain.includes($.value))),m.value&&(t=t.filter(o=>Y(o.id,D.value)&&o.avatar&&o.id&&o.domain)),t}),M=S(()=>[{id:"popularity",title:"äººæ°”ç‹æ¦œ",description:"ç»¼åˆ Followers å’Œ Stars çš„äººæ°”æ’è¡Œ",icon:"ğŸ‘‘",colorScheme:"fire",showTrend:!1,data:z()},{id:"productive",title:"å¤šäº§æ¦œ",description:"åŸºäºå…¬å¼€ä»“åº“æ•°é‡çš„åˆ›ä½œåŠ›æ’è¡Œ",icon:"ğŸ†",colorScheme:"blue",showTrend:!1,data:T()},{id:"social",title:"ç¤¾äº¤è¾¾äººæ¦œ",description:"åŸºäº Following æ•°é‡çš„ç¤¾äº¤æ´»è·ƒåº¦æ’è¡Œ",icon:"ğŸ’¬",colorScheme:"green",showTrend:!1,data:j()},{id:"rising",title:"æ–°æ˜Ÿæ¦œ",description:"ç»¼åˆæ´»è·ƒåº¦æŒ‡æ ‡çš„æ½œåŠ›æ–°æ˜Ÿæ’è¡Œ",icon:"ğŸŒ ",colorScheme:"purple",showTrend:!1,data:c()},{id:"comprehensive",title:"ç»¼åˆå®åŠ›æ¦œ",description:"å¤šç»´åº¦ç»¼åˆè¯„åˆ†çš„å…¨èƒ½æ’è¡Œ",icon:"ğŸŒŸ",colorScheme:"gold",showTrend:!1,data:i()}]),q=S(()=>{var t;return(t=x.value)!=null&&t.update_time?new Date(x.value.update_time).toLocaleString("zh-CN"):new Date().toLocaleString("zh-CN")}),H=S(()=>{const t=new Date;return t.setDate(t.getDate()+1),t.setHours(6,0,0,0),t.toLocaleString("zh-CN")});function z(){return v.value.map(t=>({...t,score:(t.followers||0)*.6+(t.total_stars||0)*.4,scoreDisplay:`${t.followers||0} followers + ${t.total_stars||0} stars`})).filter(t=>t.score>0).sort((t,o)=>o.score-t.score).slice(0,k.value).map((t,o)=>({...t,rank:o+1}))}function T(){return v.value.map(t=>({...t,score:t.public_repos||0,scoreDisplay:`${t.public_repos||0} ä¸ªä»“åº“`})).filter(t=>t.score>=5).sort((t,o)=>o.score-t.score).slice(0,k.value).map((t,o)=>({...t,rank:o+1}))}function j(){return v.value.map(t=>({...t,score:t.following||0,scoreDisplay:`å…³æ³¨ ${t.following||0} äºº`})).filter(t=>t.score>=10).sort((t,o)=>o.score-t.score).slice(0,k.value).map((t,o)=>({...t,rank:o+1}))}function c(){return v.value.map(t=>{const o=Math.max(t.public_repos||1,1),w=((t.followers||0)+(t.total_stars||0))/o*(o<20?1.5:1);return{...t,score:w,scoreDisplay:`æ´»è·ƒåº¦ ${Math.round(w)}`}}).filter(t=>t.score>0).sort((t,o)=>o.score-t.score).slice(0,k.value).map((t,o)=>({...t,rank:o+1}))}function i(){return v.value.map(t=>{const o=(t.total_stars||0)*.3,u=(t.followers||0)*.25,w=(t.public_repos||0)*.2,y=(t.following||0)*.15,R=(t.repositories?t.repositories.split(";").length:0)*.1,V=o+u+w+y+R;return{...t,score:V,scoreDisplay:`ç»¼åˆåˆ† ${Math.round(V)}`}}).filter(t=>t.score>0).sort((t,o)=>o.score-t.score).slice(0,k.value).map((t,o)=>({...t,rank:o+1}))}const h=async()=>{try{p.value=!0,b.value=null;const t="/members-visualization/",o=`${t}data/members.json`.replace(/\/+/g,"/"),u=`${t}data/commits_weekly.json`.replace(/\/+/g,"/"),[w,y]=await Promise.all([fetch(o),fetch(u)]);if(!w.ok)throw new Error(`HTTP error! status: ${w.status}`);const R=await w.json();d.value=R.map(A=>(Object.keys(A).forEach(L=>{let U=A[L]||"";typeof U=="string"&&(U=U.trim().replace(/^"|"$/g,"")),A[L]=U}),A)),y.ok&&(x.value=await y.json());const V=tt("/data/datawhale_member.json");D.value=await je(V)}catch(t){b.value=t.message,console.error("åŠ è½½æ•°æ®å¤±è´¥:",t)}finally{p.value=!1}},_=()=>{},s=()=>{$.value="",m.value=!1};return Z(()=>{h()}),(t,o)=>(n(),l("div",ha,[p.value?(n(),l("div",ga,[...o[3]||(o[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"æ­£åœ¨åŠ è½½æ¦œå•æ•°æ®...",-1)])])):b.value?(n(),l("div",va,[e("p",null,"âŒ åŠ è½½å¤±è´¥: "+r(b.value),1),e("button",{onClick:h,class:"retry-btn"},"é‡è¯•")])):(n(),l("div",pa,[e("div",ba,[e("div",ya,[o[5]||(o[5]=e("label",null,"ç ”ç©¶æ–¹å‘ç­›é€‰ï¼š",-1)),W(e("select",{"onUpdate:modelValue":o[0]||(o[0]=u=>$.value=u),onChange:_},[o[4]||(o[4]=e("option",{value:""},"å…¨éƒ¨æ–¹å‘",-1)),(n(!0),l(N,null,O(g.value,u=>(n(),l("option",{key:u,value:u},r(u),9,_a))),128))],544),[[Q,$.value]])]),e("div",fa,[o[7]||(o[7]=e("label",null,"æ˜¾ç¤ºæ•°é‡ï¼š",-1)),W(e("select",{"onUpdate:modelValue":o[1]||(o[1]=u=>k.value=u),onChange:_},[...o[6]||(o[6]=[e("option",{value:10},"Top 10",-1),e("option",{value:20},"Top 20",-1),e("option",{value:50},"Top 50",-1)])],544),[[Q,k.value]])]),e("div",ka,[e("label",$a,[W(e("input",{type:"checkbox","onUpdate:modelValue":o[2]||(o[2]=u=>m.value=u),onChange:_,class:"checkbox-input"},null,544),[[I,m.value]]),o[8]||(o[8]=e("span",{class:"checkbox-text"},"ä»…æ˜¾ç¤ºç»„ç»‡æˆå‘˜",-1))])]),$.value||m.value?(n(),l("button",{key:0,onClick:s,class:"clear-filters-btn"}," æ¸…é™¤ç­›é€‰ ")):f("",!0)]),e("div",wa,[J(ss,{"members-data":d.value,"selected-domain":$.value,"top-count":k.value,"show-only-org-members":m.value,"organization-members":D.value},null,8,["members-data","selected-domain","top-count","show-only-org-members","organization-members"])]),e("div",Da,[J(ma,{"members-data":d.value,"selected-domain":$.value,"top-count":k.value,"show-only-org-members":m.value,"organization-members":D.value},null,8,["members-data","selected-domain","top-count","show-only-org-members","organization-members"])]),e("div",Ca,[(n(!0),l(N,null,O(M.value,u=>(n(),F(Ft,{key:u.id,title:u.title,description:u.description,icon:u.icon,members:u.data,"color-scheme":u.colorScheme,"show-trend":u.showTrend},null,8,["title","description","icon","members","color-scheme","show-trend"]))),128))]),e("div",xa,[e("p",null,"ğŸ“… æ•°æ®æœ€åæ›´æ–°æ—¶é—´ï¼š"+r(q.value),1),e("p",null,"ğŸ”„ ä¸‹æ¬¡æ›´æ–°æ—¶é—´ï¼š"+r(H.value),1)])]))]))}},Ma=E(Sa,[["__scopeId","data-v-8ab98721"]]),Oa=JSON.parse('{"title":"ğŸ† è´¡çŒ®è€…æ¦œå•","description":"","frontmatter":{},"headers":[],"relativePath":"rankings.md","filePath":"rankings.md","lastUpdated":1759944698000}'),Pa={name:"rankings.md"},Ta=Object.assign(Pa,{setup(a){return(p,b)=>(n(),l("div",null,[b[0]||(b[0]=e("h1",{id:"ğŸ†-è´¡çŒ®è€…æ¦œå•",tabindex:"-1"},[B("ğŸ† è´¡çŒ®è€…æ¦œå• "),e("a",{class:"header-anchor",href:"#ğŸ†-è´¡çŒ®è€…æ¦œå•","aria-label":'Permalink to "ğŸ† è´¡çŒ®è€…æ¦œå•"'},"â€‹")],-1)),b[1]||(b[1]=e("p",null,"æ¬¢è¿æ¥åˆ° Datawhale è´¡çŒ®è€…æ¦œå•é¡µé¢ï¼è¿™é‡Œå±•ç¤ºäº†åŸºäº GitHub æ•°æ®çš„å„ç§æœ‰è¶£æ’è¡Œæ¦œï¼Œè®©æˆ‘ä»¬ä¸€èµ·çœ‹çœ‹è°æ˜¯æœ€é—ªäº®çš„é‚£é¢—æ˜Ÿâ­",-1)),b[2]||(b[2]=e("h2",{id:"ğŸ“Š-å®æ—¶æ¦œå•",tabindex:"-1"},[B("ğŸ“Š å®æ—¶æ¦œå• "),e("a",{class:"header-anchor",href:"#ğŸ“Š-å®æ—¶æ¦œå•","aria-label":'Permalink to "ğŸ“Š å®æ—¶æ¦œå•"'},"â€‹")],-1)),J(Ma),b[3]||(b[3]=et("",32))]))}});export{Oa as __pageData,Ta as default};
